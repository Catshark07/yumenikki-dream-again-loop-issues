[gd_scene load_steps=2 format=3 uid="uid://bx3emvgjsww4t"]

[sub_resource type="GDScript" id="GDScript_u7swm"]
resource_name = "preload_scene"
script/source = "extends SceneNode

const SHADERS_PATH := \"res://src/shaders/\"
const SCENES_PATH := \"res://src/levels/\"

const MAX_SCENES_TO_LOAD := 3

var shaders: PackedStringArray
var scenes: PackedStringArray

func _ready() -> void:
	await get_tree().process_frame
	
	Game.Optimization.set_max_fps(10)
	gather_all_scenes()
	
func gather_all_scenes() -> void:
	for i in DirAccess.get_directories_at(SCENES_PATH):
		if i != \"__ignore\":
			for j in DirAccess.get_directories_at(SCENES_PATH + i): 
				for s in DirAccess.get_files_at(SCENES_PATH + i + \"/\" + j):
					if ((\"level.tscn\") in s): 
						var instance_scene := (load(SCENES_PATH + i + \"/\" + j + \"/\" + s) as PackedScene)
						scenes.append(SCENES_PATH + i + \"/\" + j)
						await Game.scene_manager.load_scene(instance_scene, self)
					
"

[node name="debug_preload_scenes" type="Node"]
script = SubResource("GDScript_u7swm")
