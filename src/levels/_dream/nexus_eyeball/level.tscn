[gd_scene load_steps=24 format=4 uid="uid://b67q2b5hm6tsu"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_inoc5"]
[ext_resource type="Shader" uid="uid://dqxrs4a4y611c" path="res://src/shaders/panorama/linear.gdshader" id="2_odm8p"]
[ext_resource type="Texture2D" uid="uid://cpsg4xvrbf3mo" path="res://src/images/panorama/eyeball_panorama.png" id="3_4j00j"]
[ext_resource type="PackedScene" uid="uid://bku0eqinjwowa" path="res://src/levels/__ignore/door.tscn" id="3_07q2v"]
[ext_resource type="Script" uid="uid://bxh774473av7t" path="res://src/systems/interaction/interactable.gd" id="4_d5n0m"]
[ext_resource type="Texture2D" uid="uid://cua8v3f5c3bwi" path="res://src/levels/__ignore/doors/door_eyeball.png" id="4_ey7sl"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="4_sthxv"]
[ext_resource type="Script" uid="uid://bkadpjx8csm75" path="res://src/systems/sequencing/sequence/game/on_interact.gd" id="5_fot1s"]
[ext_resource type="TileSet" uid="uid://ucja6rk8c0dh" path="res://src/levels/__ignore/tile_set/world_tile_sets/eyeball.tres" id="5_pagnx"]
[ext_resource type="AudioStream" uid="uid://dexpefjcufc0b" path="res://src/audio/bgm/world_eyeball.ogg" id="6_jutn4"]
[ext_resource type="Script" uid="uid://ofyfa3d6ql28" path="res://src/systems/components/independent/spawn_point.gd" id="8_kw8r0"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/2D/madotsuki/madotsuki.tscn" id="9_4j00j"]
[ext_resource type="Script" uid="uid://dysysg63gy1ce" path="res://src/systems/sequencing/sequence/conditional/if_player_vel.gd" id="9_fot1s"]
[ext_resource type="TileSet" uid="uid://b7vdcqrtnh77e" path="res://src/levels/__ignore/tile_set/world_tile_sets/colourful_irises.tres" id="11_kw8r0"]
[ext_resource type="Script" uid="uid://ctqw6a8qsvnv4" path="res://src/systems/sequencing/event/audio/play_bgm.gd" id="13_d5n0m"]
[ext_resource type="Script" uid="uid://c1od80bn28h0l" path="res://src/systems/sequencing/sequence_interface.gd" id="13_x4bpl"]
[ext_resource type="Script" uid="uid://c0ymap76lrhgr" path="res://src/systems/sequencing/event/scene/travel_to_scene.gd" id="14_d5n0m"]
[ext_resource type="Script" uid="uid://dkbhr01xbyr60" path="res://src/systems/components/independent/scene_traversal.gd" id="16_fot1s"]
[ext_resource type="Script" uid="uid://dxx2gbg56i1ts" path="res://src/systems/sequencing/event/scene/apply_panorama.gd" id="17_fot1s"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ppt66"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_04s3o"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ey7sl"]
size = Vector2(32, 12)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_sthxv"]
shader = ExtResource("2_odm8p")
shader_parameter/dirX = -1.0
shader_parameter/dirY = 1.0
shader_parameter/scroll_speed = 0.05
shader_parameter/initial_uv_offset = Vector2(0, 0)
shader_parameter/snapped_val = 0.0016
shader_parameter/offset_strength = 0.15
shader_parameter/offset_strength_influence = Vector2(1, 1)

[node name="eyeball_world" type="Node" node_paths=PackedStringArray("seq_initial", "seq_free", "scene_objects")]
script = ExtResource("1_inoc5")
seq_initial = NodePath("on_initial")
seq_free = NodePath("on_free")
scene_objects = [NodePath("on_initial"), NodePath("on_free")]
load_transition = SubResource("ShaderMaterial_ppt66")
unload_transition = SubResource("ShaderMaterial_04s3o")
metadata/_custom_type_script = "uid://b1ofr4umso5jf"

[node name="camera" parent="." node_paths=PackedStringArray("initial_target") instance=ExtResource("4_sthxv")]
position = Vector2(64, 48)
initial_target = NodePath("../y_order/madotsuki")

[node name="y_order" type="Node2D" parent="."]
y_sort_enabled = true

[node name="nexus" parent="y_order" node_paths=PackedStringArray("rect") instance=ExtResource("3_07q2v")]
process_mode = 0
position = Vector2(64, 16)
collision_layer = 1610612736
collision_mask = 1610612736
rect = NodePath("rect")
presence_detect = true

[node name="scene_traversal" parent="y_order/nexus/on_interact/travel_to_scene" index="0"]
scene_path = "uid://dl25joalnmaxt"
connection_id = "nexus"

[node name="spawn_point" parent="y_order/nexus" index="1"]
scene_path = "uid://dl25joalnmaxt"
connection_id = "nexus"

[node name="renderer" parent="y_order/nexus" index="2"]
texture = ExtResource("4_ey7sl")
hframes = 1
frame_h_count = 1

[node name="footprint_path_gate" type="Area2D" parent="y_order" node_paths=PackedStringArray("rect")]
position = Vector2(920, 1016)
collision_layer = 2147483648
collision_mask = 2147483648
script = ExtResource("4_d5n0m")
rect = NodePath("rect")
metadata/_custom_type_script = "uid://bxh774473av7t"

[node name="rect" type="CollisionShape2D" parent="y_order/footprint_path_gate"]
position = Vector2(0, -2)
shape = SubResource("RectangleShape2D_ey7sl")
debug_color = Color(0.2, 0, 0.7, 0.2)

[node name="on_interact" type="Node" parent="y_order/footprint_path_gate"]
script = ExtResource("5_fot1s")
metadata/_custom_type_script = "uid://bkadpjx8csm75"

[node name="travel_to_scene" type="Node" parent="y_order/footprint_path_gate/on_interact" node_paths=PackedStringArray("scene_traversal")]
script = ExtResource("14_d5n0m")
scene_traversal = NodePath("to_footprint")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="to_footprint" type="Node" parent="y_order/footprint_path_gate/on_interact/travel_to_scene" node_paths=PackedStringArray("spawn_point")]
script = ExtResource("16_fot1s")
scene_path = "uid://bj5i2xd4ypqna"
connection_id = "footprint"
spawn_point = NodePath("../../../spawn_point")
metadata/_custom_type_script = "uid://dkbhr01xbyr60"

[node name="spawn_point" type="Node2D" parent="y_order/footprint_path_gate" node_paths=PackedStringArray("parent_instead_of_self")]
position = Vector2(0, 12)
script = ExtResource("8_kw8r0")
scene_path = "uid://bj5i2xd4ypqna"
connection_id = "footprint"
parent_instead_of_self = NodePath("..")
metadata/_custom_type_script = "uid://ofyfa3d6ql28"

[node name="colourful_irises_gate" type="Area2D" parent="y_order" node_paths=PackedStringArray("rect")]
position = Vector2(40, 1096)
collision_layer = 2147483648
collision_mask = 2147483648
script = ExtResource("4_d5n0m")
secret = true
area = true
rect = NodePath("rect")
metadata/_custom_type_script = "uid://bxh774473av7t"

[node name="rect" type="CollisionShape2D" parent="y_order/colourful_irises_gate"]
shape = SubResource("RectangleShape2D_ey7sl")
debug_color = Color(0.2, 0, 0.7, 0.2)

[node name="on_interact" type="Node" parent="y_order/colourful_irises_gate"]
script = ExtResource("5_fot1s")
metadata/_custom_type_script = "uid://bkadpjx8csm75"

[node name="if_player_moving_north" type="Node" parent="y_order/colourful_irises_gate/on_interact"]
script = ExtResource("9_fot1s")
metadata/_custom_type_script = "uid://br7tiv3hm32fy"

[node name="travel_to_scene" type="Node" parent="y_order/colourful_irises_gate/on_interact/if_player_moving_north" node_paths=PackedStringArray("scene_traversal")]
script = ExtResource("14_d5n0m")
scene_traversal = NodePath("to_colorful_irises")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="to_colorful_irises" type="Node" parent="y_order/colourful_irises_gate/on_interact/if_player_moving_north/travel_to_scene" node_paths=PackedStringArray("spawn_point")]
script = ExtResource("16_fot1s")
scene_path = "uid://b5h2bldsnmdsb"
connection_id = "colourful_eyes"
spawn_point = NodePath("../../../../spawn_point")
metadata/_custom_type_script = "uid://dkbhr01xbyr60"

[node name="spawn_point" type="Node2D" parent="y_order/colourful_irises_gate" node_paths=PackedStringArray("parent_instead_of_self")]
position = Vector2(0, 16)
script = ExtResource("8_kw8r0")
scene_path = "uid://b5h2bldsnmdsb"
connection_id = "colourful_eyes"
parent_instead_of_self = NodePath("..")
metadata/_custom_type_script = "uid://ofyfa3d6ql28"

[node name="eye_hands_tiles" type="TileMapLayer" parent="y_order"]
y_sort_enabled = true
tile_map_data = PackedByteArray("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AABTACQAAAAAAAEAAABUACYAAAAAAAEAAABVACQAAAAAAAAAAABVACYAAAAAAAEAAABPACYAAAAAAAAAAAA0AAkAAAAEAAIAAAA0AAgAAAAEAAAAAAA1AAYAAAAEAAAAAAA1AAcAAAAEAAIAAAA6AAYAAAAEAAAAAAA6AAcAAAAEAAIAAAA7AAoAAAAEAAMAABA7AAsAAAAEAAUAABA7AAgAAAAEAAAAABA7AAkAAAAEAAIAABA3AAcAAAAEAAAAABA3AAgAAAAEAAIAABA3AAoAAAAEAAUAABAvAAoAAAAEAAAAAAAxAAkAAAAEAAAAAAAxAAoAAAAEAAIAAAAkACEAAAAEAAAAAAAkACIAAAAEAAIAAAAkACMAAAAEAAMAAAAkACQAAAAEAAQAAAAlACAAAAAEAAAAAAAlACEAAAAEAAIAAAAlACIAAAAEAAMAAAAlACMAAAAEAAQAAAAmAB8AAAAEAAAAAAAmACAAAAAEAAIAAAAmACEAAAAEAAMAAAAmACIAAAAEAAQAAAAkACUAAAAEAAUAAAAlACQAAAAEAAUAAAAmACMAAAAEAAUAAAAnAB4AAAAEAAAAAAAnAB8AAAAEAAIAAAAnACAAAAAEAAMAAAAnACEAAAAEAAQAAAAnACIAAAAEAAUAAAAjACQAAAACAAEAABDw/wwAAAAEAAAAABDw/w0AAAAEAAIAABDw/w4AAAAEAAMAABDw/w8AAAAEAAQAABDw/xAAAAAEAAUAABDx/w4AAAAEAAIAABDx/w8AAAAEAAMAABDx/xAAAAAEAAQAABDx/xEAAAAEAAUAABDx/w0AAAAEAAAAABDz/w8AAAAEAAAAAADz/xAAAAAEAAIAAADz/xEAAAAEAAMAAADz/xIAAAAEAAQAAADz/xMAAAAEAAUAAADv/w8AAAAEAAAAABDv/xAAAAAEAAIAABDv/xEAAAAEAAQAABDv/xIAAAAEAAUAABBHABoAAAAAAAEAAABFABwAAAAAAAAAAABGAB0AAAAAAAAAAABPAB0AAAAAAAAAAABQAB8AAAAAAAEAAAA5AD0AAAAKAAQAAAA7ADsAAAAEAAAAAAA7ADwAAAAEAAIAAAA7AD0AAAAEAAMAAAA7AD4AAAAEAAQAAAA7AD8AAAAEAAUAAAA3AD0AAAAEAAMAABA3AD4AAAAEAAQAABA3AD8AAAAEAAUAABA3ADsAAAAEAAAAABA3ADwAAAAEAAIAABA5AEAAAAAAAAQAAAA6AEEAAAAAAAYAAAA4AEIAAAAAAAgAAAA8AD8AAAAAAAYAAAA4AD4AAAAAAAYAAABgAC8AAAAFAAMAAABJAPr/AAAFAAYAAABMAPn/AAAEAAMAAABMAPr/AAAEAAUAAABMAPf/AAAEAAAAAABMAPj/AAAEAAIAAABHAPf/AAAEAAAAABBHAPj/AAAEAAIAABBHAPn/AAAEAAMAABBHAPr/AAAEAAUAABBeACwAAAAEAAAAABBeAC0AAAAEAAIAABBeAC4AAAAEAAMAABBeAC8AAAAEAAUAABBjACwAAAAEAAAAAABjAC0AAAAEAAIAAABjAC4AAAAEAAMAAABjAC8AAAAEAAUAAAAFAEAAAAAEAAAAAAAFAEEAAAAEAAIAAAAFAEIAAAAEAAMAAAAFAEMAAAAEAAQAAAAFAEQAAAAEAAUAAAAGAEEAAAAEAAAAAAAGAEIAAAAEAAIAAAAGAEMAAAAEAAMAAAAGAEQAAAAEAAQAAAAGAEUAAAAEAAUAAAAHAEIAAAAEAAAAAAAHAEMAAAAEAAIAAAAHAEQAAAAEAAMAAAAHAEUAAAAEAAQAAAAHAEYAAAAEAAUAAAD//0AAAAAEAAAAABD//0EAAAAEAAIAABD+/0EAAAAEAAAAABD//0IAAAAEAAMAABD+/0IAAAAEAAIAABD9/0IAAAAEAAAAABD//0MAAAAEAAQAABD+/0MAAAAEAAMAABD9/0MAAAAEAAIAABD//0QAAAAEAAUAABD+/0QAAAAEAAQAABD9/0QAAAAEAAMAABD+/0UAAAAEAAUAABD9/0UAAAAEAAQAABD9/0YAAAAEAAUAABD//z8AAAAAAAAAAAD+/0AAAAAAAAAAAAD9/0EAAAAAAAAAAAAFAD8AAAAAAAEAABAGAEAAAAAAAAEAABAHAEEAAAAAAAEAABAEAD4AAAAAAAEAABAEAD8AAAAEAAAAAAAEAEAAAAAEAAIAAAAEAEEAAAAEAAMAAAAEAEIAAAAEAAQAAAAEAEMAAAAEAAUAAAAAAD4AAAAAAAAAAAAAAD8AAAAEAAAAABAAAEAAAAAEAAIAABAAAEEAAAAEAAMAABAAAEIAAAAEAAQAABAAAEMAAAAEAAUAABA=")
tile_set = ExtResource("5_pagnx")

[node name="teeth" type="TileMapLayer" parent="y_order"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAACAEQAAAACAAAAAAA=")
tile_set = ExtResource("11_kw8r0")

[node name="madotsuki" parent="y_order" instance=ExtResource("9_4j00j")]
position = Vector2(64, 48)

[node name="on_initial" type="Node" parent="."]
script = ExtResource("13_x4bpl")
print_debug = true

[node name="BGM" type="Node" parent="on_initial"]
script = ExtResource("13_d5n0m")
stream = ExtResource("6_jutn4")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="panorama" type="TextureRect" parent="on_initial"]
process_mode = 4
z_index = -25
material = SubResource("ShaderMaterial_sthxv")
custom_minimum_size = Vector2(480, 270)
offset_right = 480.0
offset_bottom = 300.0
texture = ExtResource("3_4j00j")
stretch_mode = 6
script = ExtResource("17_fot1s")

[node name="on_free" type="Node" parent="."]
script = ExtResource("13_x4bpl")
print_debug = true

[editable path="y_order/nexus"]
