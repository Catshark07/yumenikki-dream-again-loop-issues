[gd_scene load_steps=15 format=3 uid="uid://dewrm6chyaasf"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_f1f8c"]
[ext_resource type="Script" uid="uid://c1od80bn28h0l" path="res://src/systems/sequencing/sequence_interface.gd" id="2_2gamr"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/2D/madotsuki/madotsuki.tscn" id="2_5snmb"]
[ext_resource type="Script" uid="uid://ctqw6a8qsvnv4" path="res://src/systems/sequencing/event/audio/play_bgm.gd" id="5_qjetg"]
[ext_resource type="PackedScene" uid="uid://dwrwwsgxt4qhm" path="res://src/entities/effects/bike_collect.tscn" id="6_m4d8g"]
[ext_resource type="AudioStream" uid="uid://hrydgrm0n3r" path="res://src/audio/bgm/mars.WAV" id="6_n41fv"]
[ext_resource type="Script" uid="uid://dxx2gbg56i1ts" path="res://src/systems/sequencing/event/scene/apply_panorama.gd" id="7_1mihv"]
[ext_resource type="Texture2D" uid="uid://c6glk4dy75gcg" path="res://src/images/panorama/dusk.png" id="8_wuk01"]
[ext_resource type="Script" uid="uid://bueabxwtsde8h" path="res://src/systems/sequencing/event/message/open_message.gd" id="9_wuk01"]
[ext_resource type="Script" uid="uid://vk574kc3l7av" path="res://src/systems/sequencing/event/audio/play_sound.gd" id="10_c3sun"]
[ext_resource type="Script" uid="uid://0v2nidb8jsha" path="res://src/systems/sequencing/event_interface.gd" id="10_f20fa"]
[ext_resource type="AudioStream" uid="uid://dilb4ev4kb82e" path="res://src/audio/se/placeholder_lisa_hahah.wav" id="11_f20fa"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_2gamr"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ghjxp"]

[node name="Ee" type="Node" node_paths=PackedStringArray("seq_initial", "scene_objects")]
script = ExtResource("1_f1f8c")
seq_initial = NodePath("on_initial")
scene_objects = [null, null, NodePath("on_initial")]
load_transition = SubResource("ShaderMaterial_2gamr")
unload_transition = SubResource("ShaderMaterial_ghjxp")
metadata/_custom_type_script = "uid://b1ofr4umso5jf"

[node name="madotsuki" parent="." instance=ExtResource("2_5snmb")]
position = Vector2(136, 104)
can_sprint = false

[node name="bike_collect" parent="." instance=ExtResource("6_m4d8g")]
visible = false
position = Vector2(88, 128)

[node name="on_initial" type="Node" parent="." node_paths=PackedStringArray("order", "front", "back")]
script = ExtResource("2_2gamr")
order = [NodePath("Event3"), NodePath("Event2"), NodePath("message"), NodePath("sound")]
front = NodePath("Event3")
back = NodePath("sound")

[node name="Event3" type="SubViewport" parent="on_initial" node_paths=PackedStringArray("next")]
own_world_3d = true
transparent_bg = true
canvas_item_default_texture_filter = 0
canvas_item_default_texture_repeat = 2
size = Vector2i(480, 270)
size_2d_override = Vector2i(480, 270)
script = ExtResource("7_1mihv")
next = NodePath("../Event2")

[node name="TextureRect" type="TextureRect" parent="on_initial/Event3"]
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("8_wuk01")

[node name="Event2" type="Node" parent="on_initial" node_paths=PackedStringArray("prev", "next")]
script = ExtResource("5_qjetg")
stream = ExtResource("6_n41fv")
prev = NodePath("../Event3")
next = NodePath("../message")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="message" type="Node" parent="on_initial" node_paths=PackedStringArray("prompt_options", "prev", "next")]
script = ExtResource("9_wuk01")
texts = PackedStringArray("xxxx")
prompt_options = {
&"repeat": NodePath(""),
&"skip": NodePath("")
}
prev = NodePath("../Event2")
next = NodePath("../sound")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="Event4" type="Node" parent="on_initial" node_paths=PackedStringArray("prompt_options", "prev", "next")]
script = ExtResource("9_wuk01")
message_type = 2
texts = PackedStringArray("what is it that u desire.")
prompt_options = {
&"repeat": NodePath("repeat"),
&"skip": NodePath("skip")
}
prev = NodePath("../Event2")
next = NodePath("../sound")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="repeat" type="Node" parent="on_initial/Event4" node_paths=PackedStringArray("order", "front", "back")]
script = ExtResource("2_2gamr")
order = [NodePath("Event")]
front = NodePath("Event")
back = NodePath("Event")
metadata/_custom_type_script = "uid://c1od80bn28h0l"

[node name="Event" type="Node" parent="on_initial/Event4/repeat" node_paths=PackedStringArray("next")]
script = ExtResource("10_f20fa")
custom_linked_pointers = true
next = NodePath("../../../message")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="skip" type="Node" parent="on_initial/Event4" node_paths=PackedStringArray("order", "front", "back", "next")]
script = ExtResource("2_2gamr")
order = [NodePath("Event2")]
front = NodePath("Event2")
back = NodePath("Event2")
next = NodePath("../../sound")
metadata/_custom_type_script = "uid://c1od80bn28h0l"

[node name="Event2" type="Node" parent="on_initial/Event4/skip" node_paths=PackedStringArray("next")]
script = ExtResource("10_f20fa")
custom_linked_pointers = true
next = NodePath("../../../sound")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="sound" type="Node" parent="on_initial" node_paths=PackedStringArray("prev")]
script = ExtResource("10_c3sun")
sound = ExtResource("11_f20fa")
prev = NodePath("../message")
metadata/_custom_type_script = "uid://0v2nidb8jsha"
