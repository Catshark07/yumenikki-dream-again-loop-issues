[gd_scene load_steps=15 format=3 uid="uid://cpe6q6ba5agcg"]

[ext_resource type="Script" uid="uid://bxh774473av7t" path="res://src/systems/interaction/base_interactable.gd" id="1_tcrsc"]
[ext_resource type="Texture2D" uid="uid://cfciqqbav65d7" path="res://src/entities/sentients/red_jellyfish/idle.png" id="2_2wara"]
[ext_resource type="Script" uid="uid://bkadpjx8csm75" path="res://src/systems/sequencing/sequence/game/on_interact.gd" id="3_vf5kd"]
[ext_resource type="Script" uid="uid://c1od80bn28h0l" path="res://src/systems/sequencing/sequence_interface.gd" id="4_5we47"]
[ext_resource type="Script" uid="uid://dspsbq33tl0wa" path="res://src/systems/sequencing/event/game/invoke_game_event.gd" id="5_hm86t"]
[ext_resource type="Script" uid="uid://b8vm7vkk5240d" path="res://src/systems/sequencing/event/player/append_effect.gd" id="6_rrsvf"]
[ext_resource type="Resource" uid="uid://bi65brqjolfb" path="res://src/player/2D/madotsuki/effects/medamude/medamaude.tres" id="7_af0m7"]
[ext_resource type="Script" uid="uid://vk574kc3l7av" path="res://src/systems/sequencing/event/audio/play_sound.gd" id="8_useg3"]
[ext_resource type="AudioStream" uid="uid://berstp18uwqhm" path="res://src/audio/se/effect_found.WAV" id="9_8ean5"]
[ext_resource type="Script" uid="uid://bueabxwtsde8h" path="res://src/systems/sequencing/event/message/open_message.gd" id="10_mq2bj"]
[ext_resource type="Script" uid="uid://d1ojbn5jneejv" path="res://src/systems/sequencing/event/node/set_property.gd" id="11_nd8pn"]
[ext_resource type="Script" uid="uid://dyaslht461mw2" path="res://src/systems/sequencing/event/game/wait_seconds.gd" id="12_b4g2a"]
[ext_resource type="Script" uid="uid://bdm7kig80eqqk" path="res://src/systems/save/node/save_properties.gd" id="13_rn3os"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_13ycl"]
size = Vector2(16, 16)

[node name="medamaude_alt_collect" type="Area2D" node_paths=PackedStringArray("rect")]
collision_layer = 0
collision_mask = 0
script = ExtResource("1_tcrsc")
rect = NodePath("rect")
metadata/_custom_type_script = "uid://bxh774473av7t"

[node name="rect" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_13ycl")
debug_color = Color(0.2, 0, 0.7, 0.2)

[node name="sprite" type="Sprite2D" parent="."]
texture = ExtResource("2_2wara")

[node name="on_interact" type="Node" parent="."]
script = ExtResource("3_vf5kd")
metadata/_custom_type_script = "uid://bkadpjx8csm75"

[node name="effect_sequence" type="Node" parent="on_interact"]
script = ExtResource("4_5we47")
metadata/_custom_type_script = "uid://c1od80bn28h0l"

[node name="request_cutscene_start" type="Node" parent="on_interact/effect_sequence" node_paths=PackedStringArray("next")]
script = ExtResource("5_hm86t")
event_id = "CUTSCENE_START_REQUEST"
next = NodePath("../append_effect")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="append_effect" type="Node" parent="on_interact/effect_sequence" node_paths=PackedStringArray("next", "prev")]
script = ExtResource("6_rrsvf")
effect = ExtResource("7_af0m7")
next = NodePath("../play_sound")
prev = NodePath("../request_cutscene_start")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="play_sound" type="Node" parent="on_interact/effect_sequence" node_paths=PackedStringArray("next", "prev")]
script = ExtResource("8_useg3")
sound = ExtResource("9_8ean5")
next = NodePath("../notification")
prev = NodePath("../append_effect")
metadata/_custom_type_script = "uid://vk574kc3l7av"

[node name="notification" type="Node" parent="on_interact/effect_sequence" node_paths=PackedStringArray("next", "prev")]
script = ExtResource("10_mq2bj")
texts = PackedStringArray("[wave]you got an effect! access the inventory (ALT KEY) to use your effect.[/wave]")
next = NodePath("../set_interactable_inactive")
prev = NodePath("../play_sound")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="set_interactable_inactive" type="Node" parent="on_interact/effect_sequence" node_paths=PackedStringArray("node", "next", "prev")]
process_mode = 4
script = ExtResource("11_nd8pn")
node = NodePath("../../..")
property_name = "can_interact"
property_info = {
"class_name": &"",
"hint": 0,
"hint_string": "",
"name": "can_interact",
"type": 1,
"usage": 4102
}
property_value = true
next = NodePath("../wait_seconds")
prev = NodePath("../notification")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="wait_seconds" type="Node" parent="on_interact/effect_sequence" node_paths=PackedStringArray("next", "prev")]
script = ExtResource("12_b4g2a")
seconds = 0.25
next = NodePath("../request_cutscene_end")
prev = NodePath("../set_interactable_inactive")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="request_cutscene_end" type="Node" parent="on_interact/effect_sequence" node_paths=PackedStringArray("prev")]
script = ExtResource("5_hm86t")
event_id = "CUTSCENE_END_REQUEST"
prev = NodePath("../wait_seconds")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="save_node_data" type="Node" parent="."]
script = ExtResource("13_rn3os")
properties = PackedStringArray("can_interact")
metadata/_custom_type_script = "uid://bdm7kig80eqqk"
