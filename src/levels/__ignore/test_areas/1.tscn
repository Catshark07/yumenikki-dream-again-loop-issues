[gd_scene load_steps=12 format=4 uid="uid://dkpwf0m2skd6f"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_lu1jh"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/2D/madotsuki/madotsuki.tscn" id="2_6175u"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="3_xuv0w"]
[ext_resource type="Shader" uid="uid://crclnnrqddewa" path="res://src/shaders/panorama/depth.gdshader" id="4_4e31m"]
[ext_resource type="Script" uid="uid://c1od80bn28h0l" path="res://src/systems/event/sequence/sequence_interface.gd" id="4_vga2u"]
[ext_resource type="Texture2D" uid="uid://b4gjcclvhphd7" path="res://src/images/panorama/earth.png" id="5_a27ul"]
[ext_resource type="TileSet" uid="uid://crsr3gx0s6ht5" path="res://src/levels/__ignore/tile_set/apartment_dream.tres" id="6_4e31m"]
[ext_resource type="PackedScene" uid="uid://blgkyj1ogaecl" path="res://src/systems/seamless_detector_v2.tscn" id="8_4e31m"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4e31m"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_a27ul"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_j3sd5"]
shader = ExtResource("4_4e31m")
shader_parameter/uv_offset_initial = Vector2(0, 0)
shader_parameter/offset_strength = 0.385
shader_parameter/offset_strength_x_influence = 1.0
shader_parameter/offset_strength_y_influence = 1.0
shader_parameter/initial_uv_offset = Vector2(0, 0)
shader_parameter/overlay_modulate = Color(0, 0, 0, 1)
shader_parameter/transparency = 0.0

[node name="1" type="Node2D"]
script = ExtResource("1_lu1jh")
scene_load_sequence = Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("4_vga2u"),"order":Array[Node]([]),"marked_for_skip":PackedInt32Array(),"skip_invalid_sequences":true,"halt_sequence":false,"deferred":true,"wait_til_finished":true,"skip_warning":false)

scene_unload_sequence = Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("4_vga2u"),"order":Array[Node]([]),"marked_for_skip":PackedInt32Array(),"skip_invalid_sequences":true,"halt_sequence":false,"deferred":true,"wait_til_finished":true,"skip_warning":false)

load_transition = SubResource("ShaderMaterial_4e31m")
unload_transition = SubResource("ShaderMaterial_a27ul")

[node name="scene_load_sequence" type="Node" parent="."]
script = ExtResource("4_vga2u")

[node name="scene_unload_sequence" type="Node" parent="."]
script = ExtResource("4_vga2u")

[node name="madotsuki" parent="." instance=ExtResource("2_6175u")]
position = Vector2(112, 240)

[node name="audio_listener" parent="madotsuki" index="5"]
current = false

[node name="panorama (bottom_layer)" type="CanvasLayer" parent="."]
layer = -30

[node name="TextureRect" type="TextureRect" parent="panorama (bottom_layer)"]
material = SubResource("ShaderMaterial_j3sd5")
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("5_a27ul")

[node name="camera" parent="." instance=ExtResource("3_xuv0w")]

[node name="camera_handler" parent="camera" index="0" node_paths=PackedStringArray("target")]
target = NodePath("../../madotsuki")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AADy//r/AAABAAQAAADz//r/AAABAAQAAAD0//r/AAABAAQAAAD1//r/AAABAAQAAAD2//r/AAABAAQAAAD3//v/AAABAAQAAAD4//v/AAABAAQAAAD5//v/AAABAAQAAAD6//v/AAABAAQAAAD7//v/AAABAAQAAAD8//z/AAABAAQAAAD7//z/AAABAAQAAAD6//z/AAABAAQAAAD2//v/AAABAAQAAADx//r/AAABAAQAAADw//r/AAABAAQAAADv//r/AAABAAQAAAD3//r/AAABAAQAAAD4//r/AAABAAQAAAD5//r/AAABAAQAAAD6//r/AAABAAQAAAD7//r/AAABAAQAAAD8//r/AAABAAQAAAD9//r/AAABAAQAAAD+//r/AAABAAQAAAD///r/AAABAAQAAAAAAPr/AAABAAQAAAABAPr/AAABAAQAAAACAPr/AAABAAQAAAD1//v/AAABAAQAAAD8//v/AAABAAQAAAD9//z/AAABAAQAAAD5//z/AAABAAQAAAD4//z/AAABAAQAAAD3//z/AAABAAQAAAD2//z/AAABAAQAAAD1//z/AAABAAQAAAD0//z/AAABAAQAAAD+//z/AAABAAQAAAD///z/AAABAAQAAAAAAPz/AAABAAQAAAABAP3/AAABAAQAAAACAP3/AAABAAQAAAADAP3/AAABAAQAAAAEAP3/AAABAAQAAAAFAP3/AAABAAQAAAAAAP3/AAABAAQAAAD///3/AAABAAQAAAD+//3/AAABAAQAAAD9//3/AAABAAQAAAD8//3/AAABAAQAAAD7//3/AAABAAQAAAD6//3/AAABAAQAAAD5//3/AAABAAQAAAD4//3/AAABAAQAAAD3//3/AAABAAQAAAD2//3/AAABAAQAAAD1//3/AAABAAQAAAD0//3/AAABAAQAAAD6//7/AAABAAQAAAD7//7/AAABAAQAAAD8//7/AAABAAQAAAD9//7/AAABAAQAAAD+////AAABAAQAAAD/////AAABAAQAAAAAAP//AAABAAQAAAABAP//AAABAAQAAAACAP//AAABAAQAAAADAP//AAABAAQAAAAEAAAAAAABAAQAAAAFAAAAAAABAAQAAAAGAAAAAAABAAQAAAAHAAAAAAABAAQAAAAIAAAAAAABAAQAAAAJAAAAAAABAAUAAAAKAAEAAAABAAQAAAAJAAEAAAABAAQAAAAIAAEAAAABAAQAAAAHAAEAAAABAAQAAAAGAAEAAAABAAQAAAADAAAAAAABAAQAAAAAAP7/AAABAAQAAAD///7/AAABAAQAAAD+//7/AAABAAQAAAABAP7/AAABAAQAAAACAP7/AAABAAQAAAADAP7/AAABAAQAAAAEAP//AAABAAQAAAAFAP//AAABAAQAAAAGAP//AAABAAQAAAAHAP//AAABAAQAAAAKAAAAAAABAAQAAAALAAAAAAABAAYAAAAMAAEAAAABAAQAAAANAAEAAAABAAQAAAAOAAEAAAABAAYAAAALAAEAAAABAAQAAAACAAAAAAABAAQAAAABAAAAAAABAAQAAAAAAAAAAAABAAQAAAD//wAAAAABAAQAAAD+/wAAAAABAAQAAAD9/wAAAAABAAQAAAD8/wAAAAABAAQAAAAAAAEAAAABAAQAAAABAAEAAAABAAQAAAACAAEAAAABAAQAAAADAAIAAAABAAQAAAAEAAIAAAABAAQAAAAFAAIAAAABAAQAAAAGAAIAAAABAAQAAAAHAAMAAAABAAQAAAAGAAMAAAABAAQAAAAFAAMAAAABAAQAAAAEAAMAAAABAAQAAAADAAMAAAABAAQAAAACAAMAAAABAAQAAAABAAMAAAABAAQAAAAAAAMAAAABAAQAAAD//wMAAAABAAQAAAD+/wMAAAABAAQAAAD9/wMAAAABAAQAAAD8/wMAAAABAAQAAAD7/wMAAAABAAQAAAD6/wMAAAABAAQAAAD5/wMAAAABAAQAAAD4/wMAAAABAAQAAAD3/wMAAAABAAQAAAD6/wQAAAABAAQAAAD7/wQAAAABAAQAAAD8/wQAAAABAAQAAAD9/wQAAAABAAQAAAD+/wUAAAABAAQAAAD//wUAAAABAAQAAAAAAAUAAAABAAQAAAABAAYAAAABAAYAAAACAAYAAAABAAUAAAADAAYAAAABAAYAAAADAAcAAAABAAYAAAACAAcAAAABAAQAAAABAAcAAAABAAQAAAAAAAcAAAABAAYAAAD//wcAAAABAAQAAAD+/wcAAAABAAQAAAD9/wYAAAABAAQAAAD8/wYAAAABAAQAAAD7/wYAAAABAAQAAAD6/wYAAAABAAQAAAD5/wYAAAABAAQAAAD7/wcAAAABAAQAAAD8/wcAAAABAAQAAAD9/wcAAAABAAQAAAD+/wgAAAABAAQAAAD//wgAAAABAAQAAAAAAAgAAAABAAQAAAABAAgAAAABAAQAAAACAAkAAAABAAQAAAADAAkAAAABAAQAAAAEAAkAAAABAAQAAAAFAAoAAAABAAQAAAAGAAoAAAABAAQAAAAHAAoAAAABAAQAAAAEAAoAAAABAAQAAAADAAoAAAABAAQAAAACAAoAAAABAAQAAAABAAoAAAABAAQAAAAAAAkAAAABAAQAAAD//wkAAAABAAQAAAD+/wkAAAABAAQAAAD9/wkAAAABAAQAAAD8/wkAAAABAAQAAAAEAAsAAAABAAQAAAAFAAsAAAABAAQAAAAGAAsAAAABAAQAAAAHAAwAAAABAAQAAAAGAAwAAAABAAQAAAAFAAwAAAABAAQAAAAEAAwAAAABAAQAAAADAAwAAAABAAQAAAACAAwAAAABAAQAAAABAAsAAAABAAQAAAAAAAsAAAABAAQAAAD//wsAAAABAAQAAAD+/wsAAAABAAQAAAD9/wsAAAABAAQAAAD8/wsAAAABAAQAAAD//wwAAAABAAQAAAAAAAwAAAABAAQAAAABAA0AAAABAAQAAAACAA4AAAABAAQAAAABAA4AAAABAAQAAAAAAA4AAAABAAQAAAD//w4AAAABAAQAAAD+/w4AAAABAAQAAAD//w8AAAABAAQAAAANAAcAAAABAAUAAAAMAAcAAAABAAQAAAALAAcAAAABAAYAAAAKAAcAAAABAAQAAAAJAAcAAAABAAUAAAAIAAcAAAABAAQAAAAHAAcAAAABAAYAAAAGAAcAAAABAAYAAAAFAAcAAAABAAQAAAAEAAcAAAABAAYAAAD//wYAAAABAAUAAAAAAAYAAAABAAUAAAAEAAYAAAABAAQAAAAFAAUAAAABAAQAAAAGAAUAAAABAAUAAAAHAAUAAAABAAYAAAAIAAUAAAABAAUAAAAJAAUAAAABAAUAAAAKAAUAAAABAAYAAAALAAUAAAABAAQAAAAMAAUAAAABAAYAAAANAAUAAAABAAQAAAAMAAYAAAABAAUAAAALAAYAAAABAAQAAAAKAAYAAAABAAUAAAAJAAYAAAABAAQAAAAIAAYAAAABAAUAAAAHAAYAAAABAAUAAAAGAAYAAAABAAUAAAAFAAYAAAABAAYAAAAHAAgAAAABAAUAAAAGAAgAAAABAAUAAAAFAAgAAAABAAQAAAAIAAgAAAABAAUAAAAJAAgAAAABAAUAAAAKAAgAAAABAAUAAAALAAgAAAABAAYAAAAMAAgAAAABAAYAAAANAAgAAAABAAUAAAAJAAkAAAABAAQAAAAKAAkAAAABAAYAAAALAAkAAAABAAQAAAAMAAkAAAABAAYAAAANAAkAAAABAAQAAAAOAAkAAAABAAQAAAAPAAoAAAABAAUAAAAQAAoAAAABAAQAAAARAAoAAAABAAYAAAAPAAsAAAABAAQAAAAOAAsAAAABAAYAAAANAAsAAAABAAUAAAAMAAsAAAABAAQAAAALAAsAAAABAAQAAAAKAAsAAAABAAUAAAAQAAwAAAABAAQAAAARAAwAAAABAAQAAAAPAAwAAAABAAUAAAAOAAwAAAABAAQAAAANAAwAAAABAAYAAAAMAAwAAAABAAUAAAALAAwAAAABAAQAAAAKAAwAAAABAAYAAAASAAwAAAABAAYAAAAQAA0AAAABAAYAAAAPAA0AAAABAAUAAAAOAA0AAAABAAQAAAANAA0AAAABAAQAAAAMAA0AAAABAAQAAAALAA4AAAABAAUAAAAMAA4AAAABAAQAAAANAA4AAAABAAYAAAAOAA8AAAABAAUAAAAPAA8AAAABAAYAAAAQAA8AAAABAAUAAAARAA8AAAABAAYAAAASAA8AAAABAAQAAAATABAAAAABAAYAAAASABAAAAABAAQAAAARABAAAAABAAYAAAAQABAAAAABAAQAAAAPABAAAAABAAYAAAAOABAAAAABAAYAAAAUABEAAAABAAQAAAAVABEAAAABAAYAAAATABEAAAABAAUAAAAWABEAAAABAAYAAAAXABEAAAABAAQAAAAYABEAAAABAAQAAAAWABAAAAABAAUAAAAVABAAAAABAAUAAAAUAA8AAAABAAYAAAATAA4AAAABAAUAAAASAA0AAAABAAYAAAASAAsAAAABAAQAAAARAAkAAAABAAUAAAAQAAkAAAABAAQAAAAPAAgAAAABAAUAAAAOAAcAAAABAAUAAAANAAYAAAABAAYAAAANAAQAAAABAAQAAAAOAAQAAAABAAYAAAAPAAQAAAABAAYAAAAQAAQAAAABAAUAAAAOAAMAAAABAAQAAAANAAMAAAABAAQAAAAMAAMAAAABAAUAAAALAAMAAAABAAUAAAAMAAIAAAABAAYAAAANAAIAAAABAAUAAAAPAAEAAAABAAYAAAANAAAAAAABAAQAAAAMAAAAAAABAAUAAAAIAP//AAABAAYAAAAJAP//AAABAAQAAAAKAP//AAABAAQAAAALAP7/AAABAAQAAAAMAP7/AAABAAQAAAAKAP7/AAABAAUAAAAJAP7/AAABAAUAAAAIAP7/AAABAAQAAAAHAP7/AAABAAUAAAAGAP7/AAABAAQAAAAFAP7/AAABAAUAAAA=")
tile_set = ExtResource("6_4e31m")

[node name="seamless_detector_v2" parent="." instance=ExtResource("8_4e31m")]
position = Vector2(-16, 96)
player_detector = Object(Area2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":3,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(368, 256),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"disable_mode":0,"collision_layer":1073741824,"collision_mask":1073741824,"collision_priority":1.0,"input_pickable":true,"monitoring":true,"monitorable":true,"priority":0,"gravity_space_override":0,"gravity_point":false,"gravity_point_unit_distance":0.0,"gravity_point_center":Vector2(0, 1),"gravity_direction":Vector2(0, 1),"gravity":980.0,"linear_damp_space_override":0,"linear_damp":0.1,"angular_damp_space_override":0,"angular_damp":1.0,"audio_bus_override":false,"audio_bus_name":&"Master","script":Resource("res://src/systems/region/region.gd"),"rect":Object(CollisionShape2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(0, 0),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"shape":null,"disabled":false,"one_way_collision":false,"one_way_collision_margin":1.0,"debug_color":Color(0.2, 0, 0.7, 0.2),"script":null)
,"debug_colour":Color(0, 0, 0, 0.3),"region_priority":0,"shape":null)


[editable path="madotsuki"]
[editable path="camera"]
