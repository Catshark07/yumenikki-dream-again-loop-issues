[gd_scene load_steps=19 format=3 uid="uid://btg3e240ltjxx"]

[ext_resource type="Theme" uid="uid://bv8atq67jgwrc" path="res://src/global_theme.tres" id="3_5atdl"]
[ext_resource type="PackedScene" uid="uid://7gkxfsran1js" path="res://src/scenes/credits.tscn" id="3_k4drn"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="5_bmll1"]
[ext_resource type="PackedScene" uid="uid://bryqyqyp5scn7" path="res://src/ui/template_button.tscn" id="5_jissf"]
[ext_resource type="Texture2D" uid="uid://bou005stcbra6" path="res://src/images/ui/menu_game_start.png" id="6_d7jyh"]
[ext_resource type="Shader" uid="uid://bhdcejnx8m6be" path="res://src/shaders/ui/button_texture_grad_mask.gdshader" id="7_dwoed"]
[ext_resource type="Texture2D" uid="uid://d3w274mddfvtd" path="res://src/images/ui/menu_credits.png" id="7_vexp4"]
[ext_resource type="Texture2D" uid="uid://bu6rhvlkeswa6" path="res://src/images/ui/menu_game_quit.png" id="8_msekq"]
[ext_resource type="Shader" uid="uid://hsx1wbnb1rif" path="res://src/shaders/screen_overlay/bw_invert_blur.gdshader" id="9_omn5r"]
[ext_resource type="Script" uid="uid://c1od80bn28h0l" path="res://src/systems/sequencing/sequence_interface.gd" id="16_ppdc2"]

[sub_resource type="GDScript" id="GDScript_h18ho"]
resource_name = "menu"
script/source = "@tool

extends GameScene

@export var button_new_game: GUIPanelButton
@export var button_credits: GUIPanelButton
@export var button_quit: GUIPanelButton

@export var credits_go_back: GUIPanelButton
@export var credits_panel: Control

const prologue_level: String = (\"res://src/levels/_neutral/prologue/level.tscn\")

func _initialize() -> void:
	
	super()
	GameManager.change_to_state(\"pregame\")
	
	button_new_game.pressed.connect(func(): 
		Game.scene_manager.change_scene_to(preload(prologue_level)))
		
	button_credits.pressed.connect(func(): credits_panel.visible = true)
	button_quit.pressed.connect(func(): Application.quit())
	
	credits_go_back.pressed.connect(func(): credits_panel.visible = false)
	
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bmll1"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_u2r5h"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dwoed"]
shader = ExtResource("7_dwoed")
shader_parameter/first_color = Color(0, 0, 0, 1)
shader_parameter/second_color = Color(0, 0, 0, 0)
shader_parameter/position = 0.0
shader_parameter/size = 1.0
shader_parameter/angle = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6sr68"]
shader = ExtResource("7_dwoed")
shader_parameter/first_color = Color(0, 0, 0, 1)
shader_parameter/second_color = Color(0, 0, 0, 0)
shader_parameter/position = 0.0
shader_parameter/size = 1.0
shader_parameter/angle = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_uj1l6"]
shader = ExtResource("7_dwoed")
shader_parameter/first_color = Color(0, 0, 0, 1)
shader_parameter/second_color = Color(0, 0, 0, 0)
shader_parameter/position = 0.0
shader_parameter/size = 1.0
shader_parameter/angle = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jissf"]
shader = ExtResource("9_omn5r")
shader_parameter/blur_amount = 1.5
shader_parameter/pixel_size = 400.0
shader_parameter/contrast = 1.14

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8cjbf"]
shader = ExtResource("7_dwoed")
shader_parameter/first_color = Color(0, 0, 0, 1)
shader_parameter/second_color = Color(0, 0, 0, 0)
shader_parameter/position = 0.0
shader_parameter/size = 1.0
shader_parameter/angle = 0.0

[node name="menu" type="Node2D" node_paths=PackedStringArray("button_new_game", "button_credits", "button_quit", "credits_go_back", "credits_panel", "seq_initial", "seq_free")]
script = SubResource("GDScript_h18ho")
button_new_game = NodePath("ui/menu/new_game")
button_credits = NodePath("ui/menu/credits")
button_quit = NodePath("ui/menu/quit_to_desktop")
credits_go_back = NodePath("ui/credtis_panel/PanelContainer/MarginContainer/VBoxContainer/GUIPanelButton")
credits_panel = NodePath("ui/credtis_panel")
seq_initial = NodePath("on_initial")
seq_free = NodePath("on_free")
load_transition = SubResource("ShaderMaterial_bmll1")
unload_transition = SubResource("ShaderMaterial_u2r5h")

[node name="camera" parent="." instance=ExtResource("5_bmll1")]
position = Vector2(240, 136)

[node name="bg" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="ColorRect" type="ColorRect" parent="bg"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -16.0
offset_top = -16.0
offset_right = 16.0
offset_bottom = 14.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="ui" type="CanvasLayer" parent="."]
layer = 20

[node name="menu" type="VBoxContainer" parent="ui"]
offset_left = 176.0
offset_top = 86.0
offset_right = 304.0
offset_bottom = 184.0
mouse_filter = 2
theme = ExtResource("3_5atdl")
theme_override_constants/separation = 8

[node name="new_game" parent="ui/menu" node_paths=PackedStringArray("abstract_button", "display_bg", "main_container", "inner_main_container", "icon_content_seperator", "margin_container", "icon_display_container", "icon_display", "text_display") instance=ExtResource("5_jissf")]
custom_minimum_size = Vector2(60, 18)
layout_mode = 2
abstract_button = NodePath("main_container/abstract_button")
display_bg = NodePath("main_container/display_bg")
main_container = NodePath("main_container")
inner_main_container = NodePath("main_container/margin_container/icon_content_seperator/inner_main_container")
icon_content_seperator = NodePath("main_container/margin_container/icon_content_seperator")
margin_container = NodePath("main_container/margin_container")
icon_display_container = NodePath("main_container/margin_container/icon_content_seperator/icon_display_container")
icon_display = NodePath("main_container/margin_container/icon_content_seperator/icon_display_container/icon_display")
text_display = NodePath("main_container/margin_container/icon_content_seperator/inner_main_container/text_display")

[node name="display_bg" parent="ui/menu/new_game/main_container" index="0"]
material = SubResource("ShaderMaterial_dwoed")

[node name="icon_display" parent="ui/menu/new_game/main_container/margin_container/icon_content_seperator/icon_display_container" index="0"]
texture = ExtResource("6_d7jyh")

[node name="text_display" parent="ui/menu/new_game/main_container/margin_container/icon_content_seperator/inner_main_container" index="0"]
text = "New Game"

[node name="abstract_button" parent="ui/menu/new_game/main_container" index="2" node_paths=PackedStringArray("button")]
button = NodePath("button")

[node name="button" parent="ui/menu/new_game/main_container/abstract_button" index="0"]
focus_mode = 1
focus_behavior_recursive = 0
mouse_behavior_recursive = 0
accessibility_name = ""
accessibility_description = ""
accessibility_live = 0
accessibility_controls_nodes = Array[NodePath]([])
accessibility_described_by_nodes = Array[NodePath]([])
accessibility_labeled_by_nodes = Array[NodePath]([])
accessibility_flow_to_nodes = Array[NodePath]([])

[node name="credits" parent="ui/menu" node_paths=PackedStringArray("abstract_button", "display_bg", "main_container", "inner_main_container", "icon_content_seperator", "margin_container", "icon_display_container", "icon_display", "text_display") instance=ExtResource("5_jissf")]
custom_minimum_size = Vector2(60, 18)
layout_mode = 2
abstract_button = NodePath("main_container/abstract_button")
display_bg = NodePath("main_container/display_bg")
main_container = NodePath("main_container")
inner_main_container = NodePath("main_container/margin_container/icon_content_seperator/inner_main_container")
icon_content_seperator = NodePath("main_container/margin_container/icon_content_seperator")
margin_container = NodePath("main_container/margin_container")
icon_display_container = NodePath("main_container/margin_container/icon_content_seperator/icon_display_container")
icon_display = NodePath("main_container/margin_container/icon_content_seperator/icon_display_container/icon_display")
text_display = NodePath("main_container/margin_container/icon_content_seperator/inner_main_container/text_display")

[node name="display_bg" parent="ui/menu/credits/main_container" index="0"]
material = SubResource("ShaderMaterial_6sr68")

[node name="icon_display" parent="ui/menu/credits/main_container/margin_container/icon_content_seperator/icon_display_container" index="0"]
texture = ExtResource("7_vexp4")

[node name="text_display" parent="ui/menu/credits/main_container/margin_container/icon_content_seperator/inner_main_container" index="0"]
text = "Credits"

[node name="abstract_button" parent="ui/menu/credits/main_container" index="2" node_paths=PackedStringArray("button")]
button = NodePath("button")

[node name="button" parent="ui/menu/credits/main_container/abstract_button" index="0"]
focus_mode = 1
focus_behavior_recursive = 0
mouse_behavior_recursive = 0
accessibility_name = ""
accessibility_description = ""
accessibility_live = 0
accessibility_controls_nodes = Array[NodePath]([])
accessibility_described_by_nodes = Array[NodePath]([])
accessibility_labeled_by_nodes = Array[NodePath]([])
accessibility_flow_to_nodes = Array[NodePath]([])

[node name="quit_to_desktop" parent="ui/menu" node_paths=PackedStringArray("abstract_button", "display_bg", "main_container", "inner_main_container", "icon_content_seperator", "margin_container", "icon_display_container", "icon_display", "text_display") instance=ExtResource("5_jissf")]
custom_minimum_size = Vector2(60, 18)
layout_mode = 2
abstract_button = NodePath("main_container/abstract_button")
display_bg = NodePath("main_container/display_bg")
main_container = NodePath("main_container")
inner_main_container = NodePath("main_container/margin_container/icon_content_seperator/inner_main_container")
icon_content_seperator = NodePath("main_container/margin_container/icon_content_seperator")
margin_container = NodePath("main_container/margin_container")
icon_display_container = NodePath("main_container/margin_container/icon_content_seperator/icon_display_container")
icon_display = NodePath("main_container/margin_container/icon_content_seperator/icon_display_container/icon_display")
text_display = NodePath("main_container/margin_container/icon_content_seperator/inner_main_container/text_display")

[node name="display_bg" parent="ui/menu/quit_to_desktop/main_container" index="0"]
material = SubResource("ShaderMaterial_uj1l6")

[node name="icon_display" parent="ui/menu/quit_to_desktop/main_container/margin_container/icon_content_seperator/icon_display_container" index="0"]
texture = ExtResource("8_msekq")

[node name="text_display" parent="ui/menu/quit_to_desktop/main_container/margin_container/icon_content_seperator/inner_main_container" index="0"]
text = "Quit to Desktop"

[node name="abstract_button" parent="ui/menu/quit_to_desktop/main_container" index="2" node_paths=PackedStringArray("button")]
button = NodePath("button")

[node name="button" parent="ui/menu/quit_to_desktop/main_container/abstract_button" index="0"]
focus_mode = 1
focus_behavior_recursive = 0
mouse_behavior_recursive = 0
accessibility_name = ""
accessibility_description = ""
accessibility_live = 0
accessibility_controls_nodes = Array[NodePath]([])
accessibility_described_by_nodes = Array[NodePath]([])
accessibility_labeled_by_nodes = Array[NodePath]([])
accessibility_flow_to_nodes = Array[NodePath]([])

[node name="seprator_2" type="HSeparator" parent="ui/menu"]
layout_mode = 2

[node name="game_ver" type="Label" parent="ui/menu"]
layout_mode = 2
text = "VERSION: pre-alpha 02"

[node name="credtis_panel" parent="ui" instance=ExtResource("3_k4drn")]
visible = false

[node name="ColorRect" parent="ui/credtis_panel" index="0"]
material = SubResource("ShaderMaterial_jissf")

[node name="display_bg" parent="ui/credtis_panel/PanelContainer/MarginContainer/VBoxContainer/GUIPanelButton/main_container" index="0"]
material = SubResource("ShaderMaterial_8cjbf")

[node name="on_initial" type="Node" parent="."]
script = ExtResource("16_ppdc2")

[node name="on_free" type="Node" parent="."]
script = ExtResource("16_ppdc2")

[editable path="camera"]
[editable path="ui/menu/new_game"]
[editable path="ui/menu/credits"]
[editable path="ui/menu/quit_to_desktop"]
[editable path="ui/credtis_panel"]
