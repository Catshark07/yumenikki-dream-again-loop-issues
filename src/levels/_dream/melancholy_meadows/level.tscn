[gd_scene load_steps=62 format=4 uid="uid://bwnkls72smobx"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_euwtw"]
[ext_resource type="Texture2D" uid="uid://b405u21xqpgib" path="res://src/levels/_dream/melancholy_meadows/sprites/bg_far.png" id="2_g85wj"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="2_goouj"]
[ext_resource type="Texture2D" uid="uid://b2j8ydr0wj50f" path="res://src/images/panorama/clouds_custom.png" id="3_ajlq5"]
[ext_resource type="Texture2D" uid="uid://crkn3cbjxd770" path="res://src/levels/_dream/melancholy_meadows/sprites/bg_med.png" id="3_if3f7"]
[ext_resource type="AudioStream" uid="uid://dywv7qyigvflq" path="res://src/audio/bgm/madoxy_36.ogg" id="3_sivtw"]
[ext_resource type="Texture2D" uid="uid://dxd2ioo2tgj4u" path="res://src/levels/_dream/melancholy_meadows/sprites/bg_close.png" id="4_fu275"]
[ext_resource type="Texture2D" uid="uid://b0qn4i2rch4o6" path="res://src/images/rain_drop.png" id="5_ldcx7"]
[ext_resource type="PackedScene" uid="uid://bku0eqinjwowa" path="res://src/levels/__ignore/door.tscn" id="5_y5lum"]
[ext_resource type="Script" uid="uid://bhphmk5huga7w" path="res://src/systems/sequencing/event/actors/change_default_footstep.gd" id="6_4w7n5"]
[ext_resource type="Script" uid="uid://d3r72epfndsge" path="res://src/autoloads/panorama_system.gd" id="6_rxk0l"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/2D/madotsuki/madotsuki.tscn" id="7_3ko4r"]
[ext_resource type="Shader" uid="uid://dqxrs4a4y611c" path="res://src/shaders/panorama/linear.gdshader" id="7_hbw2p"]
[ext_resource type="Resource" uid="uid://buu266lqaqu16" path="res://src/audio/footsteps/grass.tres" id="7_ldcx7"]
[ext_resource type="Texture2D" uid="uid://d05qh7dyhfasy" path="res://src/levels/_dream/melancholy_meadows/sprites/grass_tiles.png" id="8_5bdlq"]
[ext_resource type="Script" uid="uid://jf85vmwx4pj" path="res://src/player/2D/scripts/pl_variables.gd" id="10_f2u12"]
[ext_resource type="Texture2D" uid="uid://t5rnf72thq7g" path="res://src/entities/effects/_sprites/bike.png" id="13_46ofv"]
[ext_resource type="Script" uid="uid://bxh774473av7t" path="res://src/systems/interaction/interactable.gd" id="13_vwl0w"]
[ext_resource type="Script" uid="uid://bkadpjx8csm75" path="res://src/systems/sequencing/sequence/game/on_interact.gd" id="14_ew5em"]
[ext_resource type="Script" uid="uid://bueabxwtsde8h" path="res://src/systems/sequencing/event/message/open_message.gd" id="15_8vi0b"]
[ext_resource type="Script" uid="uid://dspsbq33tl0wa" path="res://src/systems/sequencing/event/game/invoke_game_event.gd" id="15_wpy5q"]
[ext_resource type="Texture2D" uid="uid://d0rb3nf5lo1jc" path="res://src/levels/_dream/melancholy_meadows/sprites/eyes_sheet.png" id="16_euwtw"]
[ext_resource type="Script" uid="uid://dxx2gbg56i1ts" path="res://src/systems/sequencing/event/scene/apply_panorama.gd" id="17_6e7c4"]
[ext_resource type="Script" uid="uid://c1od80bn28h0l" path="res://src/systems/sequencing/sequence_interface.gd" id="17_kt105"]
[ext_resource type="Script" uid="uid://ctqw6a8qsvnv4" path="res://src/systems/sequencing/event/audio/play_bgm.gd" id="18_6e7c4"]
[ext_resource type="Script" uid="uid://vk574kc3l7av" path="res://src/systems/sequencing/event/audio/play_sound.gd" id="18_46ofv"]
[ext_resource type="AudioStream" uid="uid://cwbsiscenoxfx" path="res://src/audio/se/se_cloth_foley_2.wav" id="19_y5lum"]
[ext_resource type="AudioStream" uid="uid://du5x1lok1mk78" path="res://src/audio/se/se_cloth_foley_3.wav" id="20_2v1pn"]
[ext_resource type="AudioStream" uid="uid://daa4fj15uaf4j" path="res://src/audio/amb/amb_rain_muffle.ogg" id="20_kt105"]
[ext_resource type="Script" uid="uid://ctbtfitoggtku" path="res://src/systems/components/component_receiver.gd" id="20_sivtw"]
[ext_resource type="Script" uid="uid://b8vm7vkk5240d" path="res://src/systems/sequencing/event/player/append_effect.gd" id="21_4w7n5"]
[ext_resource type="Script" uid="uid://btgm8okupfro7" path="res://src/systems/region/cam_deadzone.gd" id="22_bvgas"]
[ext_resource type="Resource" uid="uid://w1ycqdwy7pk8" path="res://src/player/2D/madotsuki/effects/bike/bike.tres" id="22_ldcx7"]
[ext_resource type="TileSet" uid="uid://b0kyfgy4bib24" path="res://src/levels/__ignore/tile_set/_common_objs.tres" id="23_g07oc"]
[ext_resource type="AudioStream" uid="uid://berstp18uwqhm" path="res://src/audio/se/effect_found.WAV" id="23_pi472"]
[ext_resource type="Script" uid="uid://d1ojbn5jneejv" path="res://src/systems/sequencing/event/node/set_property.gd" id="24_8w5wg"]
[ext_resource type="Script" uid="uid://bqs7mvieiy4cw" path="res://src/levels/__ignore/tilemap_collision_setup.gd" id="24_vwl0w"]
[ext_resource type="Script" uid="uid://dyaslht461mw2" path="res://src/systems/sequencing/event/game/wait_seconds.gd" id="25_bqiim"]
[ext_resource type="Script" uid="uid://0v2nidb8jsha" path="res://src/systems/sequencing/event_interface.gd" id="26_66piu"]
[ext_resource type="Texture2D" uid="uid://dbqrd37d4cdid" path="res://src/levels/_dream/melancholy_meadows/sprites/big_eye.png" id="33_qxrv5"]
[ext_resource type="Texture2D" uid="uid://ba6k3tocgoecd" path="res://src/levels/_dream/melancholy_meadows/sprites/big_pupil.png" id="34_aargj"]
[ext_resource type="Script" uid="uid://cx4t46m5wt82v" path="res://src/systems/components/overrides/look_at.gd" id="35_o1y0b"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bvgas"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_q0hdm"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_h4qng"]
shader = ExtResource("7_hbw2p")
shader_parameter/dirX = 1.0
shader_parameter/dirY = 0.0
shader_parameter/scroll_speed = 0.07
shader_parameter/initial_uv_offset = Vector2(0, 0)
shader_parameter/offset_strength = 0.755
shader_parameter/offset_strength_influence = Vector2(1, 1)
shader_parameter/overlay_modulate = Color(1, 1, 1, 1)
shader_parameter/transparency = 0.91
shader_parameter/optional_gradient = false

[sub_resource type="FastNoiseLite" id="FastNoiseLite_xpdku"]
noise_type = 0
frequency = 0.0063

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_ehtqx"]
width = 480
height = 270
noise = SubResource("FastNoiseLite_xpdku")
seamless = true

[sub_resource type="Gradient" id="Gradient_ldcx7"]
colors = PackedColorArray(1, 1, 1, 0.533333, 1, 1, 1, 0.0177778)

[sub_resource type="Resource" id="Resource_ldcx7"]
resource_local_to_scene = true
resource_name = "pl_variables"
script = ExtResource("10_f2u12")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_b7all"]
texture = ExtResource("8_5bdlq")
separation = Vector2i(1, 0)
texture_region_size = Vector2i(40, 32)
0:0/size_in_atlas = Vector2i(1, 2)
0:0/animation_speed = 1.5
0:0/animation_mode = 1
0:0/animation_frame_0/duration = 1.0
0:0/animation_frame_1/duration = 1.0
0:0/animation_frame_2/duration = 1.0
0:0/animation_frame_3/duration = 1.0
0:0/0 = 0
0:0/0/custom_data_0 = 4

[sub_resource type="TileSet" id="TileSet_3ws3m"]
tile_size = Vector2i(40, 32)
custom_data_layer_0/name = "material"
custom_data_layer_0/type = 2
sources/0 = SubResource("TileSetAtlasSource_b7all")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_cetoh"]
texture = ExtResource("16_euwtw")
separation = Vector2i(1, 0)
texture_region_size = Vector2i(57, 32)
0:0/animation_speed = 10.0
0:0/animation_frame_0/duration = 1.0
0:0/animation_frame_1/duration = 1.0
0:0/0 = 0
0:1/animation_speed = 8.0
0:1/animation_mode = 1
0:1/animation_frame_0/duration = 1.0
0:1/animation_frame_1/duration = 1.0
0:1/animation_frame_2/duration = 1.0
0:1/animation_frame_3/duration = 1.0
0:1/animation_frame_4/duration = 1.0
0:1/animation_frame_5/duration = 1.0
0:1/animation_frame_6/duration = 1.0
0:1/animation_frame_7/duration = 1.0
0:1/animation_frame_8/duration = 1.0
0:1/animation_frame_9/duration = 1.0
0:1/0 = 0
0:2/animation_speed = 10.0
0:2/animation_mode = 1
0:2/animation_frame_0/duration = 1.0
0:2/animation_frame_1/duration = 1.0
0:2/animation_frame_2/duration = 1.0
0:2/animation_frame_3/duration = 1.0
0:2/0 = 0

[sub_resource type="TileSet" id="TileSet_sivtw"]
tile_size = Vector2i(40, 16)
sources/0 = SubResource("TileSetAtlasSource_cetoh")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8hook"]
size = Vector2(32, 32)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jvepq"]
shader = ExtResource("7_hbw2p")
shader_parameter/dirX = -1.0
shader_parameter/dirY = 0.0
shader_parameter/scroll_speed = 0.01
shader_parameter/initial_uv_offset = Vector2(0, 0)
shader_parameter/offset_strength = 0.075
shader_parameter/offset_strength_influence = Vector2(1, 1)
shader_parameter/overlay_modulate = Color(1, 1, 1, 1)
shader_parameter/transparency = 0.0
shader_parameter/optional_gradient = false

[sub_resource type="Shader" id="Shader_86ni5"]
code = "shader_type canvas_item;
render_mode world_vertex_coords;

global uniform vec2 uv_offset;
uniform float offset_strength;
uniform float offset_strength_x_influence = 1;
uniform float offset_strength_y_influence = 1;

void vertex()
{
	UV.x = ((vec4(UV, TEXTURE_PIXEL_SIZE)).xy + ((uv_offset / 2.5) * (offset_strength * offset_strength_x_influence))).x;
	UV.y = ((vec4(UV, TEXTURE_PIXEL_SIZE)).xy + (uv_offset * (offset_strength * offset_strength_y_influence))).y;
}

void fragment()
{
	COLOR.r = COLOR.r;
	COLOR.g = COLOR.g;
	COLOR.b = COLOR.b;
	COLOR.a = COLOR.a;
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rbkrg"]
shader = SubResource("Shader_86ni5")
shader_parameter/offset_strength = 1.0
shader_parameter/offset_strength_x_influence = 0.2
shader_parameter/offset_strength_y_influence = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_86ni5"]
shader = SubResource("Shader_86ni5")
shader_parameter/offset_strength = 1.0
shader_parameter/offset_strength_x_influence = 0.6
shader_parameter/offset_strength_y_influence = 0.0

[sub_resource type="Shader" id="Shader_umbah"]
code = "shader_type canvas_item;
render_mode world_vertex_coords;

global uniform vec2 uv_offset;
uniform float offset_strength;
uniform float offset_strength_x_influence = 1;
uniform float offset_strength_y_influence = 1;

void vertex()
{
	UV.x = ((vec4(UV, TEXTURE_PIXEL_SIZE)).xy + ((uv_offset / 2.5) * (offset_strength * offset_strength_x_influence))).x;
	UV.y = ((vec4(UV, TEXTURE_PIXEL_SIZE)).xy + (uv_offset * (offset_strength * offset_strength_y_influence))).y;
}

void fragment()
{
	COLOR.r = COLOR.r;
	COLOR.g = COLOR.g;
	COLOR.b = COLOR.b;
	COLOR.a = COLOR.a;
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8q110"]
shader = SubResource("Shader_umbah")
shader_parameter/offset_strength = 1.0
shader_parameter/offset_strength_x_influence = 0.85
shader_parameter/offset_strength_y_influence = 0.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_q0hdm"]
size = Vector2(2144, 296)

[node name="melancholy_path" type="Node" node_paths=PackedStringArray("seq_initial", "seq_free")]
script = ExtResource("1_euwtw")
seq_initial = NodePath("on_initial")
seq_free = NodePath("on_free")
load_transition = SubResource("ShaderMaterial_bvgas")
unload_transition = SubResource("ShaderMaterial_q0hdm")

[node name="screen_overlay" type="CanvasLayer" parent="."]
layer = 10

[node name="fog" type="TextureRect" parent="screen_overlay"]
material = SubResource("ShaderMaterial_h4qng")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
texture = SubResource("NoiseTexture2D_ehtqx")
script = ExtResource("6_rxk0l")

[node name="camera_handler" parent="." node_paths=PackedStringArray("initial_target") instance=ExtResource("2_goouj")]
position = Vector2(-208, 256)
initial_target = NodePath("../y_order/madotsuki")

[node name="rain" type="CPUParticles2D" parent="camera_handler"]
position = Vector2(-72, -152)
amount = 30
texture = ExtResource("5_ldcx7")
lifetime = 0.5
preprocess = 5.0
emission_shape = 3
emission_rect_extents = Vector2(350, 0.1)
direction = Vector2(1, 1)
spread = 3.7
gravity = Vector2(200, 200)
initial_velocity_min = 500.0
initial_velocity_max = 500.0
color_ramp = SubResource("Gradient_ldcx7")

[node name="y_order" type="Node2D" parent="."]
y_sort_enabled = true

[node name="to_docks_A" parent="y_order" instance=ExtResource("5_y5lum")]
position = Vector2(-208, 240)

[node name="travel_to_scene" parent="y_order/to_docks_A/on_interact" index="3"]
process_mode = 4
scene_path = "uid://b7ixvvfnudrtd"
connection_id = "A_section"

[node name="spawn_point" parent="y_order/to_docks_A" index="1"]
scene_path = "uid://b7ixvvfnudrtd"
connection_id = "A_section"

[node name="madotsuki" parent="y_order" instance=ExtResource("7_3ko4r")]
position = Vector2(-208, 256)
values = SubResource("Resource_ldcx7")

[node name="meadows_tiles" type="TileMapLayer" parent="y_order"]
z_index = 1
tile_map_data = PackedByteArray("AAADAAgAAAAAAAAAAAACAAgAAAAAAAAAAAABAAgAAAAAAAAAAAAAAAgAAAAAAAAAAAD//wgAAAAAAAAAAAD+/wgAAAAAAAAAAAD9/wgAAAAAAAAAAAD8/wgAAAAAAAAAAAD7/wgAAAAAAAAAAAD6/wgAAAAAAAAAAAAEAAgAAAAAAAAAAAAFAAgAAAAAAAAAAAAGAAgAAAAAAAAAAAAHAAgAAAAAAAAAAAAIAAgAAAAAAAAAAAAJAAgAAAAAAAAAAAAKAAgAAAAAAAAAAAALAAgAAAAAAAAAAAAMAAgAAAAAAAAAAAANAAgAAAAAAAAAAAAOAAgAAAAAAAAAAAAPAAgAAAAAAAAAAAAQAAgAAAAAAAAAAAARAAgAAAAAAAAAAAASAAgAAAAAAAAAAAATAAgAAAAAAAAAAAAUAAgAAAAAAAAAAAAVAAgAAAAAAAAAAAAWAAgAAAAAAAAAAAAXAAgAAAAAAAAAAAAYAAgAAAAAAAAAAAAZAAgAAAAAAAAAAAAaAAgAAAAAAAAAAAAbAAgAAAAAAAAAAAAcAAgAAAAAAAAAAAAdAAgAAAAAAAAAAAAeAAgAAAAAAAAAAAAfAAgAAAAAAAAAAAAgAAgAAAAAAAAAAAAhAAgAAAAAAAAAAAAiAAgAAAAAAAAAAAAjAAgAAAAAAAAAAAAkAAgAAAAAAAAAAAAlAAgAAAAAAAAAAAAmAAgAAAAAAAAAAAAnAAgAAAAAAAAAAAAoAAgAAAAAAAAAAAApAAgAAAAAAAAAAAAqAAgAAAAAAAAAAAArAAgAAAAAAAAAAAAsAAgAAAAAAAAAAAAtAAgAAAAAAAAAAAAuAAgAAAAAAAAAAAAvAAgAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_3ws3m")

[node name="small_eyes" type="TileMapLayer" parent="y_order"]
tile_map_data = PackedByteArray("AAAaAP//AAAAAAIAAAAkAAIAAAAAAAEAAAAvAAsAAAAAAAAAAAA1AAIAAAAAAAIAAAArAAgAAAAAAAIAAAAlAAkAAAAAAAAAAAAOAAMAAAAAAAAAAAATAAcAAAAAAAIAAAAeAAsAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_sivtw")

[node name="big_eye" type="Sprite2D" parent="y_order"]
position = Vector2(1264, 56)
texture = ExtResource("33_qxrv5")

[node name="BigPupil" type="Sprite2D" parent="y_order/big_eye"]
texture = ExtResource("34_aargj")

[node name="ComponentReceiver" type="Node" parent="y_order/big_eye/BigPupil" node_paths=PackedStringArray("affector")]
script = ExtResource("20_sivtw")
affector = NodePath("..")
independent = true
metadata/_custom_type_script = "uid://ctbtfitoggtku"

[node name="LookAt" type="Node" parent="y_order/big_eye/BigPupil/ComponentReceiver" node_paths=PackedStringArray("look_at_target")]
script = ExtResource("35_o1y0b")
r = 8.0
look_at_target = NodePath("../../../../madotsuki")

[node name="big_eye_right" type="Sprite2D" parent="y_order"]
position = Vector2(2280, 144)
texture = ExtResource("33_qxrv5")
flip_h = true

[node name="BigPupil" type="Sprite2D" parent="y_order/big_eye_right"]
texture = ExtResource("34_aargj")

[node name="ComponentReceiver" type="Node" parent="y_order/big_eye_right/BigPupil" node_paths=PackedStringArray("affector")]
script = ExtResource("20_sivtw")
affector = NodePath("..")
independent = true
metadata/_custom_type_script = "uid://ctbtfitoggtku"

[node name="LookAt" type="Node" parent="y_order/big_eye_right/BigPupil/ComponentReceiver" node_paths=PackedStringArray("look_at_target")]
script = ExtResource("35_o1y0b")
r = 8.0
look_at_target = NodePath("../../../../madotsuki")

[node name="concealed_bike" type="Sprite2D" parent="y_order"]
position = Vector2(1881, 252)
texture = ExtResource("13_46ofv")

[node name="hidden_bike" type="Area2D" parent="y_order/concealed_bike" node_paths=PackedStringArray("rect")]
position = Vector2(-1, 4)
collision_layer = 2
collision_mask = 0
script = ExtResource("13_vwl0w")
secret = true
rect = NodePath("rect")
metadata/_custom_type_script = "uid://bxh774473av7t"

[node name="rect" type="CollisionShape2D" parent="y_order/concealed_bike/hidden_bike"]
shape = SubResource("RectangleShape2D_8hook")
debug_color = Color(0.2, 0, 0.7, 0.2)

[node name="on_interact" type="Node" parent="y_order/concealed_bike/hidden_bike" node_paths=PackedStringArray("order", "front", "back")]
script = ExtResource("14_ew5em")
order = [NodePath("request_cutscene_start"), NodePath("open_message"), NodePath("prompt"), NodePath("request_cutscene_end")]
front = NodePath("request_cutscene_start")
back = NodePath("request_cutscene_end")
metadata/_custom_type_script = "uid://bkadpjx8csm75"

[node name="request_cutscene_start" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact" node_paths=PackedStringArray("next")]
script = ExtResource("15_wpy5q")
event_id = "CUTSCENE_START_REQUEST"
next = NodePath("../open_message")
metadata/_custom_type_script = "uid://dspsbq33tl0wa"

[node name="open_message" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact" node_paths=PackedStringArray("prev", "next")]
script = ExtResource("15_8vi0b")
texts = PackedStringArray("(... there\'s something hidden in here.)")
sound_override = null
prev = NodePath("../request_cutscene_start")
next = NodePath("../prompt")
metadata/_custom_type_script = "uid://bueabxwtsde8h"

[node name="prompt" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact" node_paths=PackedStringArray("prompt_options", "prev", "next")]
script = ExtResource("15_8vi0b")
message_type = 2
texts = PackedStringArray("(investigate further?)")
sound_override = null
prompt_options = {
&"no.": NodePath("no"),
&"yes.": NodePath("yes")
}
prev = NodePath("../open_message")
next = NodePath("../request_cutscene_end")
metadata/_custom_type_script = "uid://bueabxwtsde8h"

[node name="yes" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt" node_paths=PackedStringArray("order", "front", "back")]
script = ExtResource("17_kt105")
order = [NodePath("play_another_foley"), NodePath("play_foley"), NodePath("wait_seconds"), NodePath("append_effect"), NodePath("play_sound"), NodePath("notification"), NodePath("set_interactable_inactive")]
front = NodePath("play_another_foley")
back = NodePath("set_interactable_inactive")
metadata/_custom_type_script = "uid://c1od80bn28h0l"

[node name="play_another_foley" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/yes" node_paths=PackedStringArray("next")]
process_mode = 4
script = ExtResource("18_46ofv")
sound = ExtResource("19_y5lum")
next = NodePath("../play_foley")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="play_foley" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/yes" node_paths=PackedStringArray("prev", "next")]
process_mode = 4
script = ExtResource("18_46ofv")
sound = ExtResource("20_2v1pn")
prev = NodePath("../play_another_foley")
next = NodePath("../wait_seconds")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="wait_seconds" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/yes" node_paths=PackedStringArray("prev", "next")]
script = ExtResource("25_bqiim")
seconds = 0.25
prev = NodePath("../play_foley")
next = NodePath("../append_effect")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="append_effect" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/yes" node_paths=PackedStringArray("prev", "next")]
script = ExtResource("21_4w7n5")
effect = ExtResource("22_ldcx7")
prev = NodePath("../wait_seconds")
next = NodePath("../play_sound")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="play_sound" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/yes" node_paths=PackedStringArray("prev", "next")]
process_mode = 4
script = ExtResource("18_46ofv")
sound = ExtResource("23_pi472")
prev = NodePath("../append_effect")
next = NodePath("../notification")
metadata/_custom_type_script = "uid://vk574kc3l7av"

[node name="notification" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/yes" node_paths=PackedStringArray("prev", "next")]
script = ExtResource("15_8vi0b")
texts = PackedStringArray("[wave]you got an effect! access the inventory (ALT KEY) to use your effect.[/wave]")
sound_override = null
prev = NodePath("../play_sound")
next = NodePath("../set_interactable_inactive")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="set_interactable_inactive" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/yes" node_paths=PackedStringArray("node", "prev", "next")]
process_mode = 4
script = ExtResource("24_8w5wg")
node = NodePath("../../../..")
property_name = "can_interact"
property_info = {
"class_name": &"",
"hint": 0,
"hint_string": "",
"name": "can_interact",
"type": 1,
"usage": 4102
}
property_value = true
custom_linked_pointers = true
prev = NodePath("../notification")
next = NodePath("../../../request_cutscene_end")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="no" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt" node_paths=PackedStringArray("order", "front", "back")]
script = ExtResource("17_kt105")
order = [NodePath("empty")]
front = NodePath("empty")
back = NodePath("empty")
metadata/_custom_type_script = "uid://c1od80bn28h0l"

[node name="empty" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact/prompt/no" node_paths=PackedStringArray("next")]
process_mode = 4
script = ExtResource("26_66piu")
custom_linked_pointers = true
next = NodePath("../../../request_cutscene_end")
metadata/_custom_type_script = "uid://0v2nidb8jsha"

[node name="request_cutscene_end" type="Node" parent="y_order/concealed_bike/hidden_bike/on_interact" node_paths=PackedStringArray("prev")]
script = ExtResource("15_wpy5q")
event_id = "CUTSCENE_END_REQUEST"
prev = NodePath("../prompt")
metadata/_custom_type_script = "uid://dspsbq33tl0wa"

[node name="on_initial" type="Node" parent="." node_paths=PackedStringArray("order", "front", "back")]
script = ExtResource("17_kt105")
order = [NodePath("bgm"), NodePath("amb"), NodePath("panorama"), NodePath("set_footstep_to_grass")]
skip_invalid_events = true
front = NodePath("bgm")
back = NodePath("set_footstep_to_grass")

[node name="bgm" type="Node" parent="on_initial" node_paths=PackedStringArray("next")]
process_mode = 4
script = ExtResource("18_6e7c4")
stream = ExtResource("3_sivtw")
next = NodePath("../amb")
metadata/_custom_type_script = "uid://ctqw6a8qsvnv4"

[node name="amb" type="Node" parent="on_initial" node_paths=PackedStringArray("prev", "next")]
process_mode = 4
script = ExtResource("18_6e7c4")
stream = ExtResource("20_kt105")
music_bus = 1
prev = NodePath("../bgm")
next = NodePath("../panorama")
metadata/_custom_type_script = "uid://ctqw6a8qsvnv4"

[node name="panorama" type="Node" parent="on_initial" node_paths=PackedStringArray("subviewport", "pivot", "prev", "next")]
script = ExtResource("17_6e7c4")
subviewport = NodePath("subviewport")
pivot = NodePath("pivot")
prev = NodePath("../amb")
next = NodePath("../set_footstep_to_grass")
metadata/_custom_type_script = "uid://dxx2gbg56i1ts"

[node name="pivot" type="Marker2D" parent="on_initial/panorama"]

[node name="subviewport" type="SubViewport" parent="on_initial/panorama"]
own_world_3d = true
transparent_bg = true
canvas_item_default_texture_filter = 0
canvas_item_default_texture_repeat = 2
size = Vector2i(480, 270)
size_2d_override = Vector2i(480, 270)

[node name="Sprite2D" type="Sprite2D" parent="on_initial/panorama/subviewport"]
texture_repeat = 2
material = SubResource("ShaderMaterial_jvepq")
texture = ExtResource("3_ajlq5")
centered = false

[node name="_" type="Sprite2D" parent="on_initial/panorama/subviewport"]
material = SubResource("ShaderMaterial_rbkrg")
position = Vector2(0, 128)
texture = ExtResource("2_g85wj")
centered = false

[node name="_2" type="Sprite2D" parent="on_initial/panorama/subviewport"]
material = SubResource("ShaderMaterial_86ni5")
position = Vector2(-80, 160)
texture = ExtResource("3_if3f7")
centered = false

[node name="_3" type="Sprite2D" parent="on_initial/panorama/subviewport"]
material = SubResource("ShaderMaterial_8q110")
position = Vector2(-232, 168)
texture = ExtResource("4_fu275")
centered = false

[node name="set_footstep_to_grass" type="Node" parent="on_initial" node_paths=PackedStringArray("prev")]
script = ExtResource("6_4w7n5")
footstep_material = ExtResource("7_ldcx7")
prev = NodePath("../panorama")
metadata/_custom_type_script = "uid://bhphmk5huga7w"

[node name="on_free" type="Node" parent="."]
script = ExtResource("17_kt105")
skip_invalid_events = true

[node name="deadzone" type="Area2D" parent="." node_paths=PackedStringArray("rect")]
process_mode = 3
position = Vector2(0, 152)
collision_layer = 0
collision_mask = 1073741824
script = ExtResource("22_bvgas")
rect = NodePath("rect")
metadata/_custom_type_script = "uid://btgm8okupfro7"

[node name="rect" type="CollisionShape2D" parent="deadzone"]
position = Vector2(840, -20)
shape = SubResource("RectangleShape2D_q0hdm")
debug_color = Color(0.2, 0, 0.7, 0.2)

[node name="_collision" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("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ACD//xEAAQAAAAIAACAAABEAAQAAAAIAACABABEAAQAAAAIAACACABEAAQAAAAIAACADABEAAQAAAAIAACAEABEAAQAAAAIAACAFABEAAQAAAAIAACAGABEAAQAAAAIAACAHABEAAQAAAAIAACAIABEAAQAAAAIAACAJABEAAQAAAAIAACAKABEAAQAAAAIAACALABEAAQAAAAIAACAMABEAAQAAAAIAACANABEAAQAAAAIAACAOABEAAQAAAAIAACAPABEAAQAAAAIAACAQABEAAQAAAAIAACARABEAAQAAAAIAACASABEAAQAAAAIAACATABEAAQAAAAIAACAUABEAAQAAAAIAACAVABEAAQAAAAIAACAWABEAAQAAAAIAACAXABEAAQAAAAIAACAYABEAAQAAAAIAACAZABEAAQAAAAIAACAaABEAAQAAAAIAACAbABEAAQAAAAIAACAcABEAAQAAAAIAACAdABEAAQAAAAIAACAeABEAAQAAAAIAACAfABEAAQAAAAIAACAgABEAAQAAAAIAACAhABEAAQAAAAIAACAiABEAAQAAAAIAACAjABEAAQAAAAIAACAkABEAAQAAAAIAACAlABEAAQAAAAIAACAmABEAAQAAAAIAACAnABEAAQAAAAIAACAoABEAAQAAAAIAACApABEAAQAAAAIAACAqABEAAQAAAAIAACArABEAAQAAAAIAACAsABEAAQAAAAIAACAtABEAAQAAAAIAACAuABEAAQAAAAIAACAvABEAAQAAAAIAACAwABEAAQAAAAIAACAxABEAAQAAAAIAACAyABEAAQAAAAIAACAzABEAAQAAAAIAACA0ABEAAQAAAAIAACA1ABEAAQAAAAIAACA2ABEAAQAAAAIAACA3ABEAAQAAAAIAACA4ABEAAQAAAAIAACA5ABEAAQAAAAIAACA6ABEAAQAAAAIAACA7ABEAAQAAAAIAACA8ABEAAQAAAAIAACA9ABEAAQAAAAIAACA+ABEAAQAAAAIAACA/ABEAAQAAAAIAACBAABEAAQAAAAIAACBBABEAAQAAAAIAACBCABEAAQAAAAIAACBDABEAAQAAAAIAACBEABEAAQAAAAIAACBFABEAAQAAAAIAACBGABEAAQAAAAIAACBHABEAAQAAAAIAACBIABEAAQAAAAIAACBJABEAAQAAAAIAACBKABEAAQAAAAIAACBLABEAAQAAAAIAACBMABEAAQAAAAIAACBNABEAAQAAAAIAACBOABEAAQAAAAIAACBPABEAAQAAAAIAACBQABEAAQAAAAIAACBRABEAAQAAAAIAACBSABEAAQAAAAIAACBTABEAAQAAAAIAACBUABEAAQAAAAIAACBVABEAAQAAAAIAACBWABEAAQAAAAIAACBXABEAAQAAAAIAACBYABEAAQAAAAIAACBZABEAAQAAAAIAACBaABEAAQAAAAIAACBbABEAAQAAAAIAACBcABEAAQAAAAIAACBdABEAAQAAAAIAACBeABEAAQAAAAIAACBfABEAAQAAAAIAACBgABEAAQAAAAIAACBhABEAAQAAAAIAACBiABEAAQAAAAIAACBjABEAAQAAAAIAACBkABEAAQAAAAIAACBlABEAAQAAAAIAACBmABEAAQAAAAIAACBnABEAAQAAAAIAACBoABEAAQAAAAIAACBpABEAAQAAAAIAACBqABEAAQAAAAIAACBrABEAAQAAAAIAACBsABEAAQAAAAIAACBtABEAAQAAAAIAACBuABEAAQAAAAIAACBvABEAAQAAAAIAACBwABEAAQAAAAIAACBxABEAAQAAAAIAACByABEAAQAAAAIAACBzABEAAQAAAAIAACB0ABEAAQAAAAIAACB1ABEAAQAAAAIAACB2ABEAAQAAAAIAACB3ABEAAQAAAAEAAAB3ABAAAQAAAAEAAAA=")
tile_set = ExtResource("23_g07oc")
script = ExtResource("24_vwl0w")

[editable path="y_order/to_docks_A"]
