[gd_scene load_steps=8 format=3 uid="uid://fq2keer08txb"]

[ext_resource type="PackedScene" uid="uid://qvbki1ipp72p" path="res://src/entities/sentients/template_sentient.tscn" id="1_vfmhg"]
[ext_resource type="Script" uid="uid://bxe7uci7t77tx" path="res://src/entities/sb_variables.gd" id="2_6m5s6"]
[ext_resource type="Texture2D" uid="uid://bxogmhf0ohc1c" path="res://src/entities/sentients/neon/nasu.png" id="2_vfmhg"]
[ext_resource type="Script" uid="uid://cdjphp77kgyqr" path="res://src/systems/utils/spritesheet_formatter_animated.gd" id="3_cofr7"]
[ext_resource type="PackedScene" uid="uid://36fsvg2ttglw" path="res://src/entities/effects/_template_effect_collect.tscn" id="4_cofr7"]
[ext_resource type="Resource" uid="uid://ncax1yyo23go" path="res://src/player/2D/madotsuki/effects/neon/neon.tres" id="6_6m5s6"]

[sub_resource type="Resource" id="Resource_c74sf"]
resource_local_to_scene = true
resource_name = "sb_variables"
script = ExtResource("2_6m5s6")

[node name="nasu" instance=ExtResource("1_vfmhg")]
values = SubResource("Resource_c74sf")

[node name="sprite_renderer" parent="." index="0"]
position = Vector2(0, 0)
texture = ExtResource("2_vfmhg")
hframes = 4
script = ExtResource("3_cofr7")
autoplay = true
loop = true
reverse = false
end_frame = false
fps = 5.0
frame_dimensions = Vector2i(24, 24)
frame_h_count = 4

[node name="shadow_renderer" parent="." index="1"]
visible = false

[node name="behaviour_fsm" parent="." index="6" node_paths=PackedStringArray("initial_state")]
initial_state = NodePath("WANDER")

[node name="sb_loop" parent="." index="8" node_paths=PackedStringArray("children")]
children = [NodePath("../sprite_renderer"), NodePath("../shadow_renderer"), NodePath("../sb_components"), NodePath("../coll"), NodePath("../nav"), NodePath("../stance_fsm"), NodePath("../behaviour_fsm"), NodePath("../sound_player"), NodePath("../neon_effect")]

[node name="neon_effect" parent="." index="9" instance=ExtResource("4_cofr7")]

[node name="on_interact" parent="neon_effect" index="0" node_paths=PackedStringArray("order", "front", "back")]
process_mode = 4
order = [NodePath("effect_sequence")]
front = NodePath("effect_sequence")
back = NodePath("effect_sequence")

[node name="effect_sequence" parent="neon_effect/on_interact" index="0" node_paths=PackedStringArray("order", "front", "back")]
order = [NodePath("request_cutscene_start"), NodePath("append_effect"), NodePath("play_sound"), NodePath("notification"), NodePath("set_interactable_inactive"), NodePath("wait_seconds"), NodePath("request_cutscene_end")]
front = NodePath("request_cutscene_start")
back = NodePath("request_cutscene_end")

[node name="append_effect" parent="neon_effect/on_interact/effect_sequence" index="1"]
effect = ExtResource("6_6m5s6")

[node name="play_sound" parent="neon_effect/on_interact/effect_sequence" index="2"]
process_mode = 4

[editable path="neon_effect"]
