[gd_scene load_steps=19 format=4 uid="uid://b5h2bldsnmdsb"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_vndl4"]
[ext_resource type="Script" uid="uid://b4b3kjcm65mv6" path="res://src/systems/audio/bgm.gd" id="2_oov0y"]
[ext_resource type="AudioStream" uid="uid://df1213omvvset" path="res://src/audio/bgm/luff_yta_eye.ogg" id="3_qi1ih"]
[ext_resource type="Script" uid="uid://bptlrkdn0tpua" path="res://src/systems/components/overrides/wiggle.gd" id="5_bsomg"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="5_jx2yo"]
[ext_resource type="Shader" uid="uid://b4qcyrwpo36fo" path="res://src/shaders/panorama/distortion_texture.gdshader" id="5_nqkx8"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/2D/madotsuki/madotsuki.tscn" id="5_u851k"]
[ext_resource type="Texture2D" uid="uid://cm6iimafcot25" path="res://src/images/panorama/face.png" id="6_hdfwf"]
[ext_resource type="Script" uid="uid://d3r72epfndsge" path="res://src/autoloads/panorama_system.gd" id="7_7x7oi"]
[ext_resource type="TileSet" uid="uid://b7vdcqrtnh77e" path="res://src/levels/_dream/colorful_irises/obstacles/bloody_tileset.tres" id="9_n1xg1"]
[ext_resource type="TileSet" uid="uid://dlytw3uf7vjuh" path="res://src/levels/_dream/colorful_irises/obstacles/eye_tileset.tres" id="18_nqkx8"]
[ext_resource type="PackedScene" uid="uid://djnomncx1otsq" path="res://src/systems/seamless_detector.tscn" id="18_nqkye"]
[ext_resource type="Script" uid="uid://c1od80bn28h0l" path="res://src/systems/sequence/sequence_interface.gd" id="20_5siph"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bsomg"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rlt31"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_e2px4"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_yqgqu"]
noise = SubResource("FastNoiseLite_e2px4")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ndxk6"]
shader = ExtResource("5_nqkx8")
shader_parameter/overlay_modulate = Color(0, 0, 0, 1)
shader_parameter/transparency = 0.0
shader_parameter/dirX = 1.49012e-08
shader_parameter/dirY = 1.0
shader_parameter/scroll_speed = 0.055
shader_parameter/uv_offset_initial = Vector2(0, 0)
shader_parameter/offset_strength = 0.3
shader_parameter/offset_strength_x_influence = 1.0
shader_parameter/offset_strength_y_influence = 1.0
shader_parameter/initial_uv_offset = Vector2(0, 0)
shader_parameter/texture_scroll = false
shader_parameter/noise_strength = 1.0
shader_parameter/noise_fwd = SubResource("NoiseTexture2D_yqgqu")

[node name="colorful_irises" type="Node"]
script = ExtResource("1_vndl4")
scene_load_sequence = Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("20_5siph"),"order":Array[Node]([]),"remove_invalid_events":true,"halt_sequence":false,"deferred":true,"wait_til_finished":true,"skip_warning":false)

scene_unload_sequence = Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("20_5siph"),"order":Array[Node]([]),"remove_invalid_events":true,"halt_sequence":false,"deferred":true,"wait_til_finished":true,"skip_warning":false)

load_transition = SubResource("ShaderMaterial_bsomg")
unload_transition = SubResource("ShaderMaterial_rlt31")

[node name="BGM" type="Node" parent="."]
script = ExtResource("2_oov0y")
stream = ExtResource("3_qi1ih")

[node name="camera" parent="." instance=ExtResource("5_jx2yo")]

[node name="camera_handler" parent="camera" index="0" node_paths=PackedStringArray("target")]
position = Vector2(213, 120)
target = NodePath("../../world/mado")

[node name="Wiggle" type="Node" parent="camera/camera_handler/marker/camera/components_receiver" index="0"]
script = ExtResource("5_bsomg")
metadata/_custom_type_script = "uid://bptlrkdn0tpua"

[node name="panorama (top_layer)" type="CanvasLayer" parent="."]
layer = -20

[node name="TextureRect" type="TextureRect" parent="panorama (top_layer)"]
material = SubResource("ShaderMaterial_ndxk6")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("6_hdfwf")
expand_mode = 3
stretch_mode = 6
script = ExtResource("7_7x7oi")

[node name="world" type="Node2D" parent="."]
y_sort_enabled = true
position = Vector2(72, -48)

[node name="mado" parent="world" instance=ExtResource("5_u851k")]
position = Vector2(0, 22)

[node name="blood_tile" type="TileMapLayer" parent="world"]
z_index = -1
use_parent_material = true
tile_map_data = PackedByteArray("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AAAjACQAAAAAAAQAAHAkACQAAAAAAAMAAHAlACQAAAAAAAIAAHAmACMAAAABAAMAABAmACQAAAAAAAEAAAAnACIAAAABAAAAABAnACMAAAABAAEAAAAnACQAAAABAAEAAAAnACUAAAABAAMAADAoACEAAAABAAAAAGAoACIAAAABAAMAACAoACUAAAABAAMAAAAoACYAAAABAAAAAEApACEAAAAAAAEAAAApACYAAAAAAAEAAAAqACEAAAAAAAEAAAAqACMAAAABAAMAABAqACQAAAABAAMAADAqACYAAAAAAAEAAAArACEAAAAAAAEAABArACMAAAABAAMAAAArACQAAAABAAMAACArACYAAAAAAAEAAAAsACEAAAAAAAEAABAsACYAAAAAAAEAAAAtACEAAAABAAAAAHAtACIAAAABAAMAADAtACUAAAABAAMAABAtACYAAAABAAAAAFAuACIAAAABAAAAAAAuACMAAAABAAEAABAuACQAAAABAAEAABAuACUAAAABAAAAACAvACMAAAABAAMAAAAvACQAAAAAAAEAABAwACQAAAAAAAIAAGAxACQAAAAAAAMAAGAyACQAAAAAAAQAAGA0ACQAAAAAAAQAAHA1ACQAAAAAAAMAAHA2ACQAAAAAAAIAAHA3ACMAAAABAAMAABA3ACQAAAAAAAEAAAA4ACIAAAABAAAAABA4ACMAAAABAAEAAAA4ACQAAAABAAEAAAA4ACUAAAABAAMAADA5ACEAAAABAAAAAGA5ACIAAAABAAMAACA5ACUAAAABAAMAAAA5ACYAAAABAAAAAEA6ACEAAAAAAAEAAAA6ACYAAAAAAAEAAAA7ACEAAAAAAAEAAAA7ACMAAAABAAMAABA7ACQAAAABAAMAADA7ACYAAAAAAAEAAAA8ACEAAAAAAAEAABA8ACMAAAABAAMAAAA8ACQAAAABAAMAACA8ACYAAAAAAAEAAAA9ACEAAAAAAAEAABA9ACYAAAAAAAEAAAA+ACEAAAABAAAAAHA+ACIAAAABAAMAADA+ACUAAAABAAMAABA+ACYAAAABAAAAAFA/ACIAAAABAAAAAAA/ACMAAAABAAEAABA/ACQAAAABAAEAABA/ACUAAAABAAAAACBAACMAAAABAAMAAABAACQAAAAAAAEAABBBACQAAAAAAAIAAGBCACQAAAAAAAMAAGBDACQAAAAAAAQAAGDg/yQAAAAAAAQAAGDq/ycAAAAAAAMAAADq/ygAAAAAAAQAAADp/yIAAAABAAMAADDp/xwAAAAAAAMAADDp/xsAAAAAAAQAADDq/xwAAAABAAIAACDq/xsAAAABAAQAACBKAB8AAAABAAAAABBKACAAAAABAAEAABBKACEAAAABAAMAADBLAB4AAAABAAAAABBLAB8AAAAAAAEAAABLACAAAAAAAAEAAABLACEAAAAAAAEAAABMABsAAAAAAAQAADBMABwAAAAAAAMAADBMAB0AAAAAAAIAADBMAB4AAAAAAAEAAABMAB8AAAAAAAEAAABMACAAAAABAAAAACBMACEAAAABAAEAAGBMACIAAAABAAMAADBNABsAAAABAAQAACBNABwAAAABAAIAACBNAB0AAAABAAEAAABNAB4AAAABAAEAAABNAB8AAAABAAAAACBNACEAAAABAAAAAABNACIAAAAAAAEAAABNACMAAAAAAAEAAABNACQAAAAAAAEAAABNACUAAAAAAAEAAABNACYAAAAAAAIAAABNACcAAAAAAAMAAABNACgAAAAAAAQAAABOACIAAAABAAMAAABOACMAAAABAAEAAABOACQAAAABAAEAAABOACUAAAABAAEAAABOACYAAAABAAMAACARADQAAAAAAAQAAFASADQAAAAAAAMAAFATADQAAAAAAAIAAFAUADMAAAABAAMAABAUADQAAAAAAAEAAFAVADMAAAAAAAEAAFAVADQAAAAAAAEAAAAVADUAAAABAAMAADAWADIAAAABAAMAABAWADMAAAAAAAEAAAAWADQAAAAAAAEAAAAWADUAAAAAAAEAAAAWADYAAAABAAEAABAWADcAAAABAAEAABAWADgAAAABAAEAABAXADIAAAABAAEAAGAXADMAAAAAAAEAAAAXADQAAAAAAAEAAAAXADUAAAAAAAEAAAAXADYAAAAAAAEAAAAXADcAAAABAAEAAEAYADEAAAABAAEAAGAYADIAAAAAAAEAAAAYADMAAAAAAAEAAAAYADQAAAAAAAEAAAAYADUAAAAAAAEAAAAYADYAAAABAAMAACAZADEAAAABAAEAAGAZADIAAAAAAAEAAAAZADMAAAAAAAEAAAAZADQAAAAAAAEAAAAZADUAAAABAAAAACAaADEAAAABAAEAAGAaADIAAAAAAAEAAAAaADMAAAAAAAEAAAAaADQAAAAAAAEAAAAbADEAAAABAAEAAGAbADIAAAAAAAEAAAAbADMAAAAAAAEAAAAbADQAAAABAAMAACAcADEAAAABAAAAAAAcADIAAAAAAAEAAAAcADMAAAAAAAEAAAAdADIAAAAAAAEAAAAdADMAAAABAAMAACAeADIAAAAAAAIAAGAfADIAAAAAAAMAAGAgADIAAAAAAAQAAGA=")
tile_set = ExtResource("9_n1xg1")

[node name="eye_tiles" type="TileMapLayer" parent="world"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAADAP//AQAAAAAAAAAEAAAAAwAAAAAAAAD7/wMAAwAAAAAAABD8/wQAAgAAAAAAAAD4//z/AQAAAAAAABD6//3/AwAAAAAAAAAYAAYAAwAAAAAAAAAaAAUAAQAAAAAAABDy/xcAAgAAAAAAAAD0/xkAAQAAAAAAAAAkABcAAgAAAAAAABAnABMAAgAAAAAAAAAoABcAAwAAAAAAAAAnABYAAwAAAAAAABAoABoAAQAAAAAAAAAZAO7/AQAAAAAAAAAbAO//AgAAAAAAAAAXAO//AwAAAAAAABAVAPH/AgAAAAAAAAAXAPT/AgAAAAAAABAaAPT/AQAAAAAAAAAPAO7/AQAAAAAAABAQAPD/AwAAAAAAAAD7/+//AwAAAAAAABAAAPD/AwAAAAAAAAACAPH/AwAAAAAAAADy//P/AwAAAAAAABAAAO3/AQAAAAAAAAAHABkAAQAAAAAAAAAJABsAAgAAAAAAAAALABgAAwAAAAAAAAAMABkAAwAAAAAAAADv/yYAAgAAAAAAAADx/ycAAQAAAAAAAAD1/yMAAwAAAAAAABD3/yUAAQAAAAAAABANACUAAwAAAAAAAAAWACYAAwAAAAAAAAAvACMAAQAAAAAAAAAuACEAAQAAAAAAAAAmACMAAQAAAAAAABAnACEAAQAAAAAAABAnACUAAgAAAAAAABAuACUAAgAAAAAAAAApACAAAwAAAAAAABAsACAAAwAAAAAAAAA0AAIAAQAAAAAAAAAyAAUAAgAAAAAAABAyAP7/AwAAAAAAABAzAP//AwAAAAAAABApAPX/AwAAAAAAAAA0ABAAAQAAAAAAAADl/wUAAgAAAAAAAADk/wcAAQAAAAAAABDj////AwAAAAAAAADi/wAAAwAAAAAAAADg/w8AAwAAAAAAAADj/xEAAwAAAAAAAADi/xIAAwAAAAAAABDe/xIAAgAAAAAAABDj/wwAAQAAAAAAAADd//n/AQAAAAAAABDg/yYAAQAAAAAAABDi/x4AAQAAAAAAABDk/yIAAgAAAAAAAAA=")
tile_set = ExtResource("18_nqkx8")

[node name="seamless_detector" parent="." instance=ExtResource("18_nqkye")]
position = Vector2(-592, -416)
expansion = Vector2i(70, 51)
boundary_size = Vector2i(1600, 1072)

[node name="scene_load_sequence" type="Node" parent="."]
script = ExtResource("20_5siph")

[node name="scene_unload_sequence" type="Node" parent="."]
script = ExtResource("20_5siph")

[editable path="camera"]
